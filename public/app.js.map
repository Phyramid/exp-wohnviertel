{"version":3,"sources":["app/app.js","app/colors.js","app/common.js","app/components/bar-chart.js","app/components/hero.js","app/components/map-chart.js","app/components/page.js","app/components/range-chart.js","app/components/stack-chart.js","app/data-getters.js","app/data.js","app/hero-scene.js","app/util.js"],"names":["Vue","use","VueResource","el","GRAPHIQ3_12","GRAPHIQ3_12_LOWER","GRAPHIQ3_12_HIGHS","_","DISTRICTS","DISTRICT_NAMES","MEASUREMENTS","AGE_GROUPS_PREFIX","AGE_GROUPS","filter","d","indexOf","map","replace","AGE_GROUPS_REDUCTION","AGE_GROUPS_REDUCED","uniq","values","AGE_GROUPS_DEFAULT_SORT","CITIZENSHIPS_PREFIX","CITIZENSHIPS_OTHERS","CITIZENSHIPS_REDUCED","CITIZENSHIPS","CITIZENSHIPS_NONREDUCED","difference","RELIGIONS_PREFIX","RELIGIONS","RELIGIONS_DEFAULT_SORT","SETTINGS","csvPath","d3","util","component","delimiters","template","props","data","mounted","elSvg","$el","querySelector","elSvgDims","getBoundingClientRect","svg","select","margins","top","right","bottom","left","width","height","g","append","attr","x","scaleBand","rangeRound","padding","y","scaleLinear","color","range","colors","interpolate","interpolateHsl","graphData","makeGraphData","draw","methods","sortBy","getGraphData","value","updateAxes","graphDataValues","domain","district","max","sampleEvenly","length","bottomAxis","axisBottom","xTickFormat","tickFormat","selectAll","remove","xAxis","call","text","xLabel","leftAxis","axisLeft","ticks","yTickFormat","yLabel","bars","exit","enter","bandwidth","hero","HeroScene","selContainer","Dom","find","elem","makeKey","getAttribute","dataGetters","allData","foreignersChart","getData","welfareChart","medianWealthChart","format","averageWealthChart","medianIncomeChart","averageIncomeChart","citizenshipChart","getKeys","getCitizenshipKeys","concat","religionChart","getReligionKeys","defaultSort","getReligionDefaultSort","ageChart","getAgeKeys","getAgeDefaultSort","err","getForeignerData","getWelfareData","getMedianWealthData","getAverageWealthData","getMedianIncomeData","getAverageIncomeData","getCitizenshipData","getReligionData","getAgeData","PADDING_FACTOR","PADDING_MIN_FACTOR","PADDING_MAX_FACTOR","min","fixCollisions","nodes","NR_ITERATIONS","MIN_DIST","FORCE_FACTOR","FORCE","doFixCollisions","curr","prev","previousElementSibling","empty","classed","Math","abs","times","each","isPercent","undefined","factoryDefaultSort","legend","tooltip","graphWidth","z","scaleOrdinal","isFocused","sortingProperty","tooltipsEnabled","stackKeys","drawAxes","drawLegend","i","getAllBars","stack","keys","getFocusedBars","zeroBarX","transition","duration","updateBarX","updateBarY","hideUnfocusedBars","style","showAllBars","focusBar","barGroup","parentNode","parentDatum","datum","key","unfocusBar","setTimeout","showTooltip","rect","barMid","window","scrollX","scrollY","html","toFixed","hideTooltip","toggleFocus","drawBars","barGroups","on","year","getKey","item","total","reduce","citizenship","districtData","includes","rawDatum","proportionalDatum","sum","redCitizenship","religion","ageGroup","reducedKey","transformDistrictData","newData","transformRow","row","numberKeys","forEach","getDistrict","done","csv","async","THREE","elContainer","document","objectSize","objectDepth","objectDefaultZ","objectCountX","objectCountY","objectSpeed","objectDirectionChangeChance","objectMinZ","objectZDiff","objectMaxZ","mouseRotationDampenX","mouseRotationDampenY","cameraRotXTarget","cameraRotYTarget","cameraRotXSpeed","cameraRotYSpeed","updateDimensions","scene","makeScene","camera","makeCamera","renderer","makeRenderer","makeObjects","lights","makeLights","bind","updateAndEnactDimensions","reactToMouse","enactDimensions","render","event","mouseXOnMove","clientX","mouseYOnMove","clientY","rotation","objectDirections","direction","index","object","objects","isObjectTooHigh","position","isObjectTooLow","wasRollSuccessful","random","change","randomizeObjectDirections","updateObjectPositions","updateCameraRotation","animate","requestAnimationFrame","Scene","PerspectiveCamera","cameraFov","aspectRatio","up","Vector3","cameraAngle","cameraZ","WebGLRenderer","antialiasing","alpha","setSize","appendChild","domElement","depth","CubeGeometry","colorSet","colorIndex","colorCode","parseInt","slice","material","MeshLambertMaterial","geometry","makeObjectGeometry","mesh","Mesh","objectZ","set","add","xRange","yRange","xObjects","xIndex","yObjects","yIndex","makeObject","light","castShadow","shadow","mapSize","far","ambientLight","AmbientLight","dirLight","DirectionalLight","spotLight","SpotLight","offsetWidth","offsetHeight","PI","aspect","fov","updateProjectionMatrix","bindContext","ctx","fn","apply","arguments","count","sample","chosen","rightHalfOffset","iMid","floor","push","leftHalf","rightHalf","chosenLeft","chosenRight","ceil","firstElement","lastElement","middlePortion","middleElements"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AANAA,cAAIC,GAAJ,CAAQC,qBAAR;;;AAQA,IAAIF,aAAJ,CAAQ,EAACG,IAAI,iBAAL,EAAR;;;;;;;;;ACVO,IAAMC,oCAAc,CACzB,SADyB,EACd,SADc,EACH,SADG,EACQ,SADR,EACmB,SADnB,EAC8B,SAD9B,EAEzB,SAFyB,EAEd,SAFc,EAEH,SAFG,EAEQ,SAFR,EAEmB,SAFnB,EAE8B,SAF9B,CAApB;;AAKA,IAAMC,gDAAoB,CAC/B,SAD+B,EACpB,SADoB,EACT,SADS,EACE,SADF,EACa,SADb,EACwB,SADxB,EAE/B,SAF+B,EAEpB,SAFoB,EAET,SAFS,EAEE,SAFF,EAEa,SAFb,EAEwB,SAFxB,CAA1B;;AAKA,IAAMC,gDAAoB,CAC/B,SAD+B,EACpB,SADoB,EACT,SADS,EACE,SADF,EACa,SADb,EACwB,SADxB,EAE/B,SAF+B,EAEpB,SAFoB,EAET,SAFS,CAA1B;;;;;;;;;;;ACVP;;IAAYC,C;;;;AAEL,IAAMC,gCAAY,CACvB,qBADuB,EAEvB,qBAFuB,EAGvB,SAHuB,EAIvB,YAJuB,EAKvB,WALuB,EAMvB,QANuB,EAOvB,YAPuB,EAQvB,OARuB,EASvB,UATuB,EAUvB,cAVuB,EAWvB,aAXuB,EAYvB,QAZuB,EAavB,eAbuB,EAcvB,SAduB,EAevB,UAfuB,EAgBvB,QAhBuB,EAiBvB,UAjBuB,EAkBvB,UAlBuB,EAmBvB,WAnBuB,EAoBvB,WApBuB,EAqBvB,WArBuB,CAAlB;;AAwBA,IAAMC,0CAAiB;AAC5B,yBAAuB,qBADK;AAE5B,yBAAuB,qBAFK;AAG5B,aAAW,SAHiB;AAI5B,gBAAc,YAJc;AAK5B,eAAa,WALe;AAM5B,YAAU,QANkB;AAO5B,gBAAc,YAPc;AAQ5B,WAAS,OARmB;AAS5B,cAAY,UATgB;AAU5B,kBAAgB,cAVY;AAW5B,iBAAe,aAXa;AAY5B,YAAU,QAZkB;AAa5B,mBAAiB,eAbW;AAc5B,aAAW,SAdiB;AAe5B,cAAY,UAfgB;AAgB5B,YAAU,QAhBkB;AAiB5B,cAAY,UAjBgB;AAkB5B,cAAY,WAlBgB;AAmB5B,eAAa,YAnBe;AAoB5B,eAAa,WApBe;AAqB5B,eAAa;AArBe,CAAvB;;AAwBA,IAAMC,sCAAe,CAC1B,wBAD0B,EAE1B,wBAF0B,EAG1B,mBAH0B,EAI1B,mBAJ0B,EAK1B,gBAL0B,EAM1B,8BAN0B,EAO1B,yBAP0B,EAQ1B,8BAR0B,EAS1B,yBAT0B,EAU1B,YAV0B,EAW1B,YAX0B,EAY1B,cAZ0B,EAa1B,cAb0B,EAc1B,cAd0B,EAe1B,cAf0B,EAgB1B,cAhB0B,EAiB1B,cAjB0B,EAkB1B,cAlB0B,EAmB1B,cAnB0B,EAoB1B,cApB0B,EAqB1B,cArB0B,EAsB1B,cAtB0B,EAuB1B,cAvB0B,EAwB1B,cAxB0B,EAyB1B,cAzB0B,EA0B1B,cA1B0B,EA2B1B,cA3B0B,EA4B1B,cA5B0B,EA6B1B,cA7B0B,EA8B1B,gBA9B0B,EA+B1B,gBA/B0B,EAgC1B,gBAhC0B,EAiC1B,kCAjC0B,EAkC1B,8BAlC0B,EAmC1B,6BAnC0B,EAoC1B,kDApC0B,EAqC1B,8BArC0B,EAsC1B,+BAtC0B,EAuC1B,iCAvC0B,EAwC1B,6CAxC0B,EAyC1B,iCAzC0B,EA0C1B,6BA1C0B,EA2C1B,qDA3C0B,EA4C1B,iCA5C0B,EA6C1B,+BA7C0B,EA8C1B,gCA9C0B,EA+C1B,4BA/C0B,EAgD1B,sCAhD0B,EAiD1B,+BAjD0B,EAkD1B,0BAlD0B,EAmD1B,6BAnD0B,EAoD1B,4BApD0B,EAqD1B,2CArD0B,EAsD1B,mBAtD0B,EAuD1B,sBAvD0B,EAwD1B,kBAxD0B,EAyD1B,wBAzD0B,EA0D1B,qBA1D0B,EA2D1B,kBA3D0B,EA4D1B,qBA5D0B,EA6D1B,gCA7D0B,EA8D1B,4BA9D0B,EA+D1B,0BA/D0B,EAgE1B,kCAhE0B,EAiE1B,8BAjE0B,EAkE1B,6BAlE0B,EAmE1B,0CAnE0B,EAoE1B,+BApE0B,EAqE1B,2BArE0B,EAsE1B,yBAtE0B,EAuE1B,kCAvE0B,EAwE1B,8BAxE0B,EAyE1B,6BAzE0B,EA0E1B,yCA1E0B,CAArB;;AA6EA,IAAMC,gDAAoB,SAA1B;;AAEA,IAAMC,kCAAaF,aACvBG,MADuB,CAChB,UAACC,CAAD;AAAA,SAAOA,EAAEC,OAAF,CAAUJ,iBAAV,KAAgC,CAAvC;AAAA,CADgB,EAEvBK,GAFuB,CAEnB,UAACF,CAAD;AAAA,SAAOA,EAAEG,OAAF,CAAUN,iBAAV,EAA6B,EAA7B,CAAP;AAAA,CAFmB,CAAnB;;AAIA,IAAMO,sDAAuB;AAClC,SAAO,KAD2B;AAElC,SAAO,KAF2B;AAGlC,WAAS,OAHyB;AAIlC,WAAS,OAJyB;AAKlC,WAAS,OALyB;AAMlC,WAAS,OANyB;AAOlC,WAAS,OAPyB;AAQlC,WAAS,OARyB;AASlC,WAAS,OATyB;AAUlC,WAAS,OAVyB;AAWlC,WAAS,OAXyB;AAYlC,WAAS,OAZyB;AAalC,WAAS,OAbyB;AAclC,WAAS,OAdyB;AAelC,WAAS,OAfyB;AAgBlC,WAAS,OAhByB;AAiBlC,WAAS,OAjByB;AAkBlC,WAAS,OAlByB;AAmBlC,WAAS,QAnByB;AAoBlC,WAAS,QApByB;AAqBlC,aAAW,QArBuB;AAsBlC,aAAW,QAtBuB;AAuBlC,aAAW;AAvBuB,CAA7B;;AA0BA,IAAMC,kDAAqBZ,EAAEa,IAAF,CAAOb,EAAEc,MAAF,CAASH,oBAAT,CAAP,CAA3B;;AAEA,IAAMI,4DAA0B,KAAhC;;AAEA,IAAMC,oDAAsB,uBAA5B;;AAEA,IAAMC,oDAAsB,iBAA5B;;AAEA,IAAMC,sDAAuB,CAClC,UADkC,EACtB,WADsB,EACT,OADS,CAA7B;;AAIA,IAAMC,sCAAehB,aACzBG,MADyB,CAClB,UAACC,CAAD;AAAA,SAAOA,EAAEC,OAAF,CAAUQ,mBAAV,KAAkC,CAAzC;AAAA,CADkB,EAEzBP,GAFyB,CAErB,UAACF,CAAD;AAAA,SAAOA,EAAEG,OAAF,CAAUM,mBAAV,EAA+B,EAA/B,CAAP;AAAA,CAFqB,CAArB;;AAIA,IAAMI,4DAA0BpB,EAAEqB,UAAF,CAAaF,YAAb,EAA2BD,oBAA3B,CAAhC;;AAEA,IAAMI,8CAAmB,YAAzB;;AAEA,IAAMC,gCAAYpB,aACtBG,MADsB,CACf,UAACC,CAAD;AAAA,SAAOA,EAAEC,OAAF,CAAUc,gBAAV,KAA+B,CAAtC;AAAA,CADe,EAEtBb,GAFsB,CAElB,UAACF,CAAD;AAAA,SAAOA,EAAEG,OAAF,CAAUY,gBAAV,EAA4B,EAA5B,CAAP;AAAA,CAFkB,CAAlB;;AAIA,IAAME,0DAAyB,qBAA/B;;AAEA,IAAMC,8BAAW;AACtBC,WAAS;AADa,CAAjB;;;;;;ACzLP;;;;AACA;;;;AAEA;;IAAYC,E;;AACZ;;IAAY3B,C;;AACZ;;IAAY4B,I;;;;;;AAHZnC,cAAIC,GAAJ,CAAQC,qBAAR;;;AAMAF,cAAIoC,SAAJ,CAAc,WAAd,EAA2B;AACzBC,cAAY,CAAC,IAAD,EAAO,GAAP,CADa;AAEzBC,YAAU,gCAFe;AAGzBC,SAAO,CACL,SADK,EACM,cADN,EACsB,QADtB,EACgC,QADhC,EAC0C,QAD1C,EACoD,aADpD,EACmE,aADnE,CAHkB;AAMzBC,QAAM,gBAAW;AACf,WAAO,EAAP;AAED,GATwB;;AAWzBC,SAXyB,qBAWf;AACR,QAAMC,QAAQ,KAAKC,GAAL,CAASC,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAMC,YAAYH,MAAMI,qBAAN,EAAlB;AACA,QAAMC,MAAMb,GAAGc,MAAH,CAAUN,KAAV,CAAZ;AACA,QAAMO,UAAU;AACdC,WAAK,EADS;AAEdC,aAAO,EAFO;AAGdC,cAAQ,EAHM;AAIdC,YAAM;AAJQ,KAAhB;;AAOA,SAAKC,KAAL,GAAaT,UAAUS,KAAV,GAAkBL,QAAQI,IAA1B,GAAiCJ,QAAQE,KAAtD;AACA,SAAKI,MAAL,GAAcV,UAAUU,MAAV,GAAmBN,QAAQC,GAA3B,GAAiCD,QAAQG,MAAvD;;AAEA,SAAKI,CAAL,GAAST,IACNU,MADM,CACC,GADD,EAENC,IAFM,CAED,WAFC,iBAEyBT,QAAQI,IAFjC,UAE0CJ,QAAQE,KAFlD,OAAT;;AAIA,SAAKQ,CAAL,GAASzB,GAAG0B,SAAH,GAAeC,UAAf,CAA0B,CAAC,CAAD,EAAI,KAAKP,KAAT,CAA1B,EAA2CQ,OAA3C,CAAmD,GAAnD,CAAT;AACA,SAAKC,CAAL,GAAS7B,GAAG8B,WAAH,GAAiBH,UAAjB,CAA4B,CAAC,KAAKN,MAAN,EAAc,CAAd,CAA5B,CAAT;AACA,SAAKU,KAAL,GAAa/B,GAAG8B,WAAH,GAAiBE,KAAjB,CAAuB,KAAKC,MAA5B,EAAoCC,WAApC,CAAgDlC,GAAGmC,cAAnD,CAAb;;AAEA,SAAKC,SAAL,GAAiB,EAAjB;;AAEA,SAAKC,aAAL;AACA,SAAKC,IAAL;AACD,GArCwB;;;AAuCzBC,WAAS;AACPF,iBADO,2BACS;AACd;AACA,WAAKD,SAAL,GAAiB/D,EAAEmE,MAAF,CAAS,KAAKC,YAAL,EAAT,EAA8B,UAAC7D,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAA9B,CAAjB;AACA,WAAKC,UAAL;AACD,KALM;AAOPA,cAPO,wBAOM;AACX,UAAIC,kBAAkB,KAAKR,SAAL,CAAetD,GAAf,CAAmB,UAACF,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAAnB,CAAtB;AACA,WAAKjB,CAAL,CAAOoB,MAAP,CAAc,KAAKT,SAAL,CAAetD,GAAf,CAAmB,UAACF,CAAD;AAAA,eAAOA,EAAEkE,QAAT;AAAA,OAAnB,CAAd;AACA,WAAKjB,CAAL,CAAOgB,MAAP,CAAc,CAAC,CAAD,EAAI7C,GAAG+C,GAAH,CAAOH,eAAP,CAAJ,CAAd;AACA,WAAKb,KAAL,CAAWc,MAAX,CAAkB5C,KAAK+C,YAAL,CAAkBJ,eAAlB,EAAmC,KAAKX,MAAL,CAAYgB,MAA/C,CAAlB;AACD,KAZM;AAcPX,QAdO,kBAcA;AAAA;;AACL,UAAIY,aAAalD,GAAGmD,UAAH,CAAc,KAAK1B,CAAnB,CAAjB;;AAEA,UAAI,KAAK2B,WAAT,EAAsB;AACpBF,qBAAaA,WAAWG,UAAX,CAAsB,KAAKD,WAA3B,CAAb;AACD;;AAED,WAAK9B,CAAL,CAAOgC,SAAP,CAAiB,eAAjB,EAAkCC,MAAlC;AACA,UAAIC,QAAQ,KAAKlC,CAAL,CACTC,MADS,CACF,GADE,EAETC,IAFS,CAEJ,OAFI,EAEK,cAFL,EAGTA,IAHS,CAGJ,WAHI,oBAGyB,KAAKH,MAH9B,QAIToC,IAJS,CAIJP,UAJI,CAAZ;AAKAM,YACGF,SADH,CACa,MADb,EAEG9B,IAFH,CAEQ,WAFR,EAEqB,YAFrB,EAGGA,IAHH,CAGQ,aAHR,EAGuB,OAHvB;AAIAgC,YACGjC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,WAFR,iBAEkC,KAAKJ,KAFvC,mBAGGI,IAHH,CAGQ,IAHR,EAGc,SAHd,EAIGA,IAJH,CAIQ,aAJR,EAIuB,KAJvB,EAKGkC,IALH,CAKQ,KAAKC,MALb;;AAOA,UAAIC,WAAW5D,GAAG6D,QAAH,CAAY,KAAKhC,CAAjB,EAAoBiC,KAApB,CAA0B,EAA1B,CAAf;AACA,UAAI,KAAKC,WAAT,EAAsB;AACpBH,mBAAWA,SAASP,UAAT,CAAoB,KAAKU,WAAzB,CAAX;AACD;;AAED,WAAKzC,CAAL,CAAOgC,SAAP,CAAiB,eAAjB,EAAkCC,MAAlC;AACA,WAAKjC,CAAL,CACGC,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,cAFjB,EAGGiC,IAHH,CAGQG,QAHR,EAIGrC,MAJH,CAIU,MAJV,EAKGC,IALH,CAKQ,WALR,EAKqB,YALrB,EAMGA,IANH,CAMQ,IANR,EAMc,MANd,EAOGA,IAPH,CAOQ,IAPR,EAOc,SAPd,EAQGA,IARH,CAQQ,aARR,EAQuB,KARvB,EASGkC,IATH,CASQ,KAAKM,MATb;;AAWA,UAAIC,OAAO,KAAK3C,CAAL,CACRgC,SADQ,CACE,MADF,EAERhD,IAFQ,CAEH,KAAK8B,SAFF,CAAX;;AAIA6B,WAAKC,IAAL,GAAYX,MAAZ;;AAEAU,WACGE,KADH,GAEG5C,MAFH,CAEU,MAFV,EAGGC,IAHH,CAGQ,OAHR,EAGiB,KAHjB,EAIGA,IAJH,CAIQ,GAJR,EAIa,UAAC5C,CAAD;AAAA,eAAO,MAAK6C,CAAL,CAAO7C,EAAEkE,QAAT,CAAP;AAAA,OAJb,EAKGtB,IALH,CAKQ,GALR,EAKa,UAAC5C,CAAD;AAAA,eAAO,MAAKiD,CAAL,CAAOjD,EAAE8D,KAAT,CAAP;AAAA,OALb,EAMGlB,IANH,CAMQ,OANR,EAMiB,KAAKC,CAAL,CAAO2C,SAAP,EANjB,EAOG5C,IAPH,CAOQ,QAPR,EAOkB,UAAC5C,CAAD;AAAA,eAAO,MAAKyC,MAAL,GAAc,MAAKQ,CAAL,CAAOjD,EAAE8D,KAAT,CAArB;AAAA,OAPlB,EAQGlB,IARH,CAQQ,MARR,EAQgB,UAAC5C,CAAD;AAAA,eAAO,MAAKmD,KAAL,CAAWnD,EAAE8D,KAAb,CAAP;AAAA,OARhB;AASD;AAtEM;AAvCgB,CAA3B;;;;;;ACRA;;;;AACA;;;;AAEA;;IAAY1C,E;;AACZ;;;;;;;;AAFAlC,cAAIC,GAAJ,CAAQC,qBAAR;;;AAKAF,cAAIoC,SAAJ,CAAc,MAAd,EAAsB;AACpBC,cAAY,CAAC,IAAD,EAAO,GAAP,CADQ;AAEpBC,YAAU,2BAFU;AAGpBC,SAAO,CAAC,QAAD,CAHa;AAIpBC,QAAM,gBAAW;AACf,WAAO,EAAP;AAED,GAPmB;;AASpBC,SAToB,qBASV;AACR,QAAI8D,OAAO,IAAIC,mBAAJ,CAAc;AACvBC,oBAAc;AADS,KAAd,CAAX;AAGD,GAbmB;;;AAepBhC,WAAS;AAfW,CAAtB;;;;;;ACPA;;;;AACA;;;;AAEA;;IAAYvC,E;;AACZ;;IAAY3B,C;;AACZ;;AACA;;IAAY4B,I;;;;;;AAJZnC,cAAIC,GAAJ,CAAQC,qBAAR;;;AAOAF,cAAIoC,SAAJ,CAAc,WAAd,EAA2B;AACzBC,cAAY,CAAC,IAAD,EAAO,GAAP,CADa;AAEzBC,YAAU,gCAFe;AAGzBC,SAAO,CACL,SADK,EACM,cADN,EACsB,QADtB,CAHkB;AAMzBC,QAAM,gBAAW;AACf,WAAO,EAAP;AAED,GATwB;;AAWzBC,SAXyB,qBAWf;AACR,SAAKM,GAAL,GAAWb,GAAGc,MAAH,CAAU0D,IAAI,KAAK/D,GAAT,EAAcgE,IAAd,CAAmB,KAAnB,EAA0BC,IAA1B,EAAV,CAAX;AACA,SAAK3C,KAAL,GAAa/B,GAAG8B,WAAH,GAAiBE,KAAjB,CAAuB,KAAKC,MAA5B,EAAoCC,WAApC,CAAgDlC,GAAGmC,cAAnD,CAAb;AACA,SAAKE,aAAL;AACA,SAAKC,IAAL;AACD,GAhBwB;;;AAkBzBC,WAAS;AACPF,iBADO,2BACS;AACd,WAAKD,SAAL,GAAiB/D,EAAEmE,MAAF,CAAS,KAAKC,YAAL,EAAT,EAA8B,UAAC7D,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAA9B,CAAjB;AACA,WAAKC,UAAL;AACD,KAJM;AAMPA,cANO,wBAMM;AACX,UAAIC,kBAAkB,KAAKR,SAAL,CAAetD,GAAf,CAAmB,UAACF,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAAnB,CAAtB;AACA,WAAKX,KAAL,CAAWc,MAAX,CAAkB5C,KAAK+C,YAAL,CAAkBJ,eAAlB,EAAmC,KAAKX,MAAL,CAAYgB,MAA/C,CAAlB;AACD,KATM;AAWPX,QAXO,kBAWA;AAAA;;AACL,UAAIqC,UAAU,SAAVA,OAAU,CAAS/F,CAAT,EAAY;AACxB,YAAIA,CAAJ,EAAO;AACL,iBAAOA,EAAEkE,QAAT;AACD,SAFD,MAEO;AACL,iBAAO,KAAK8B,YAAL,CAAkB,WAAlB,CAAP;AACD;AACF,OAND;AAOA,WAAK/D,GAAL,CACGyC,SADH,CACa,mCADb,EAEGhD,IAFH,CAEQ,KAAK8B,SAFb,EAEwBuC,OAFxB,EAGGnD,IAHH,CAGQ,MAHR,EAGgB,UAAC5C,CAAD;AAAA,eAAO,MAAKmD,KAAL,CAAWnD,EAAE8D,KAAb,CAAP;AAAA,OAHhB;AAID;AAvBM;AAlBgB,CAA3B;;;;;;ACTA;;;;AACA;;;;AAEA;;IAAY1C,E;;AACZ;;IAAYM,I;;AACZ;;AACA;;IAAYuE,W;;AACZ;;IAAY5C,M;;;;;;AALZnE,cAAIC,GAAJ,CAAQC,qBAAR;;;AAOAF,cAAIoC,SAAJ,CAAc,MAAd,EAAsB;AACpBC,cAAY,CAAC,IAAD,EAAO,GAAP,CADQ;AAEpBC,YAAU,2BAFU;AAGpBE,QAAM,gBAAW;AACf,WAAO;AACLwE,eAAS,IADJ;AAEL7C,cAAQA,MAFH;AAGL8C,uBAAiB;AACfC,iBAAS;AADM,OAHZ;AAMLC,oBAAc;AACZD,iBAAS;AADG,OANT;AASLE,yBAAmB;AACjBF,iBAAS,IADQ;AAEjB5B,qBAAa,qBAACxE,CAAD;AAAA,iBAAOL,uBAAeK,CAAf,CAAP;AAAA,SAFI;AAGjBmF,qBAAa,qBAACnF,CAAD;AAAA,iBAAOoB,GAAGmF,MAAH,CAAU,MAAV,EAAkBvG,CAAlB,IAAuB,MAA9B;AAAA;AAHI,OATd;AAcLwG,0BAAoB;AAClBJ,iBAAS,IADS;AAElB5B,qBAAa,qBAACxE,CAAD;AAAA,iBAAOL,uBAAeK,CAAf,CAAP;AAAA,SAFK;AAGlBmF,qBAAa,qBAACnF,CAAD;AAAA,iBAAOoB,GAAGmF,MAAH,CAAU,MAAV,EAAkBvG,CAAlB,IAAuB,MAA9B;AAAA;AAHK,OAdf;AAmBLyG,yBAAmB;AACjBL,iBAAS,IADQ;AAEjB5B,qBAAa,qBAACxE,CAAD;AAAA,iBAAOL,uBAAeK,CAAf,CAAP;AAAA,SAFI;AAGjBmF,qBAAa,qBAACnF,CAAD;AAAA,iBAAOoB,GAAGmF,MAAH,CAAU,MAAV,EAAkBvG,CAAlB,IAAuB,MAA9B;AAAA;AAHI,OAnBd;AAwBL0G,0BAAoB;AAClBN,iBAAS,IADS;AAElB5B,qBAAa,qBAACxE,CAAD;AAAA,iBAAOL,uBAAeK,CAAf,CAAP;AAAA,SAFK;AAGlBmF,qBAAa,qBAACnF,CAAD;AAAA,iBAAOoB,GAAGmF,MAAH,CAAU,MAAV,EAAkBvG,CAAlB,IAAuB,MAA9B;AAAA;AAHK,OAxBf;AA6BL2G,wBAAkB;AAChBP,iBAAS,IADO;AAEhBQ,iBAASX,YAAYY,kBAFL;AAGhBxD,gBAAQA,OAAO9D,iBAAP,CAAyBuH,MAAzB,CAAgC,CAAC,SAAD,CAAhC;AAHQ,OA7Bb;AAkCLC,qBAAe;AACbX,iBAAS,IADI;AAEbQ,iBAASX,YAAYe,eAFR;AAGbC,qBAAahB,YAAYiB,sBAAZ,EAHA;AAIb7D,gBAAQ,CACNA,OAAO9D,iBAAP,CAAyB,CAAzB,CADM,EAEN8D,OAAO9D,iBAAP,CAAyB,CAAzB,CAFM,EAGN8D,OAAO9D,iBAAP,CAAyB,CAAzB,CAHM,EAIN8D,OAAO9D,iBAAP,CAAyB,CAAzB,CAJM,EAKN8D,OAAO9D,iBAAP,CAAyB,CAAzB,CALM,EAMN8D,OAAO9D,iBAAP,CAAyB,CAAzB,CANM,EAON8D,OAAO9D,iBAAP,CAAyB,EAAzB,CAPM,EAQN,SARM,EASN,SATM;AAJK,OAlCV;AAkDL4H,gBAAU;AACRf,iBAAS,IADD;AAERQ,iBAASX,YAAYmB,UAFb;AAGRH,qBAAahB,YAAYoB,iBAAZ,EAHL;AAIRhE,gBAAQA,OAAO9D,iBAAP,CAAyBuH,MAAzB,CAAgC,CAAC,SAAD,CAAhC;AAJA;AAlDL,KAAP;AAyDD,GA7DmB;;AA+DpBnF,SA/DoB,qBA+DV;AAAA;;AACRD,SAAK0E,OAAL,CAAa,UAACkB,GAAD,EAAMpB,OAAN,EAAkB;AAC7B,YAAKA,OAAL,GAAeA,OAAf;AACA,YAAKC,eAAL,CAAqBC,OAArB,GAA+BH,YAAYsB,gBAAZ,CAA6BrB,OAA7B,CAA/B;AACA,YAAKG,YAAL,CAAkBD,OAAlB,GAA4BH,YAAYuB,cAAZ,CAA2BtB,OAA3B,CAA5B;AACA,YAAKI,iBAAL,CAAuBF,OAAvB,GAAiCH,YAAYwB,mBAAZ,CAAgCvB,OAAhC,CAAjC;AACA,YAAKM,kBAAL,CAAwBJ,OAAxB,GAAkCH,YAAYyB,oBAAZ,CAAiCxB,OAAjC,CAAlC;AACA,YAAKO,iBAAL,CAAuBL,OAAvB,GAAiCH,YAAY0B,mBAAZ,CAAgCzB,OAAhC,CAAjC;AACA,YAAKQ,kBAAL,CAAwBN,OAAxB,GAAkCH,YAAY2B,oBAAZ,CAAiC1B,OAAjC,CAAlC;AACA,YAAKS,gBAAL,CAAsBP,OAAtB,GAAgCH,YAAY4B,kBAAZ,CAA+B3B,OAA/B,CAAhC;AACA,YAAKa,aAAL,CAAmBX,OAAnB,GAA6BH,YAAY6B,eAAZ,CAA4B5B,OAA5B,CAA7B;AACA,YAAKiB,QAAL,CAAcf,OAAd,GAAwBH,YAAY8B,UAAZ,CAAuB7B,OAAvB,CAAxB;AACD,KAXD;AAYD,GA5EmB;;;AA8EpBvC,WAAS;AA9EW,CAAtB;;;;;;ACTA;;;;AACA;;;;AAEA;;IAAYvC,E;;AACZ;;IAAY3B,C;;AACZ;;AACA;;IAAY4B,I;;;;;;AAJZnC,cAAIC,GAAJ,CAAQC,qBAAR;;;AAOAF,cAAIoC,SAAJ,CAAc,aAAd,EAA6B;AAC3BC,cAAY,CAAC,IAAD,EAAO,GAAP,CADe;AAE3BC,YAAU,kCAFiB;AAG3BC,SAAO,CACL,SADK,EACM,cADN,EACsB,QADtB,EACgC,QADhC,EAC0C,WAD1C,EACuD,YADvD,CAHoB;AAM3BC,QAAM,gBAAW;AACf,WAAO,EAAP;AAED,GAT0B;;AAW3BC,SAX2B,qBAWjB;AACR,QAAMC,QAAQ,KAAKC,GAAL,CAASC,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAMC,YAAYH,MAAMI,qBAAN,EAAlB;AACA,QAAMC,MAAMb,GAAGc,MAAH,CAAUN,KAAV,CAAZ;AACA,QAAMO,UAAU;AACdC,WAAK,CADS;AAEdC,aAAO,CAFO;AAGdC,cAAQ,EAHM;AAIdC,YAAM;AAJQ,KAAhB;;AAOA,SAAKC,KAAL,GAAaT,UAAUS,KAAV,GAAkBL,QAAQI,IAA1B,GAAiCJ,QAAQE,KAAtD;AACA,SAAKI,MAAL,GAAcV,UAAUU,MAAV,GAAmBN,QAAQC,GAA3B,GAAiCD,QAAQG,MAAvD;;AAEA,SAAKI,CAAL,GAAST,IACNU,MADM,CACC,GADD,EAENC,IAFM,CAED,WAFC,iBAEyBT,QAAQI,IAFjC,UAE0CJ,QAAQE,KAFlD,OAAT;;AAIA,SAAKQ,CAAL,GAASzB,GAAG8B,WAAH,GAAiBE,KAAjB,CAAuB,CAAC,CAAD,EAAI,KAAKZ,KAAT,CAAvB,CAAT;AACA,SAAKW,KAAL,GAAa/B,GAAG8B,WAAH,GAAiBE,KAAjB,CAAuB,KAAKC,MAA5B,EAAoCC,WAApC,CAAgDlC,GAAGmC,cAAnD,CAAb;;AAEA,SAAKC,SAAL,GAAiB,EAAjB;;AAEA,SAAKC,aAAL;AACA,SAAKC,IAAL;AACD,GApC0B;;;AAsC3BC,WAAS;AACPF,iBADO,2BACS;AACd;AACA;AACA,WAAKD,SAAL,GAAiB/D,EAAEmE,MAAF,CAAS,KAAKC,YAAL,EAAT,EAA8B,UAAC7D,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAA9B,CAAjB;AACA,WAAKC,UAAL;AACD,KANM;AAQPA,cARO,wBAQM;AACX,UAAIC,kBAAkB,KAAKR,SAAL,CAAetD,GAAf,CAAmB,UAACF,CAAD;AAAA,eAAOA,EAAE8D,KAAT;AAAA,OAAnB,CAAtB;AACA,UAAMkE,iBAAiB,EAAvB;AACA,UAAMC,qBAAqB,GAA3B;AACA,UAAMC,qBAAqB,GAA3B;AACA,UAAMC,MAAM/G,GAAG+G,GAAH,CAAOnE,eAAP,CAAZ;AACA,UAAMG,MAAM/C,GAAG+C,GAAH,CAAOH,eAAP,CAAZ;AACA,UAAMhB,UAAU,CAACmB,MAAMgE,GAAP,IAAcH,cAA9B;AACA,WAAKnF,CAAL,CAAOoB,MAAP,CAAc,CACZkE,MAAOnF,UAAUiF,kBADL,EAEZ9D,MAAOnB,UAAUkF,kBAFL,CAAd;AAIA,WAAK/E,KAAL,CAAWc,MAAX,CAAkB5C,KAAK+C,YAAL,CAAkBJ,eAAlB,EAAmC,KAAKX,MAAL,CAAYgB,MAA/C,CAAlB;AACD,KArBM;AAuBP+D,iBAvBO,yBAuBOC,KAvBP,EAuBc;AACnB,UAAMC,gBAAgB,GAAtB;AACA,UAAMC,WAAW,EAAjB,CAFmB,CAEC;AACpB,UAAMC,eAAe,EAArB;AACA,UAAMC,QAAQF,WAAWC,YAAzB;AACA,eAASE,eAAT,CAAyB1I,CAAzB,EAA4B;AAC1B,YAAI2I,OAAOvH,GAAGc,MAAH,CAAU,IAAV,CAAX;AACA,YAAI0G,OAAOxH,GAAGc,MAAH,CAAU,KAAK2G,sBAAf,CAAX;AACA,YAAI,CAACD,KAAKE,KAAL,EAAD,IAAiBF,KAAKG,OAAL,CAAa,YAAb,CAArB,EAAiD;AAC/C,cAAIC,KAAKC,GAAL,CAASL,KAAKhG,IAAL,CAAU,GAAV,IAAiB+F,KAAK/F,IAAL,CAAU,GAAV,CAA1B,IAA4C2F,QAAhD,EAA0D;AACxDK,iBAAKhG,IAAL,CAAU,GAAV,EAAegG,KAAKhG,IAAL,CAAU,GAAV,IAAiB6F,KAAhC;AACD;AACF;AACF;AACDhJ,QAAEyJ,KAAF,CAAQZ,aAAR,EAAuB,YAAM;AAC3BD,cAAMc,IAAN,CAAWT,eAAX;AACD,OAFD;AAGD,KAxCM;AA0CPhF,QA1CO,kBA0CA;AAAA;;AACL,WAAKhB,CAAL,CAAOgC,SAAP,CAAiB,eAAjB,EAAkCC,MAAlC;;AAEA,UAAIL,aAAalD,GAAGmD,UAAH,CAAc,KAAK1B,CAAnB,EACdqC,KADc,CACR,EADQ,EACJ,KAAKkE,SAAL,GAAiB,GAAjB,GAAuBC,SADnB,CAAjB;;AAGA,UAAI,KAAK5E,UAAT,EAAqB;AACnBH,qBAAaA,WAAWG,UAAX,CAAsB,KAAKA,UAA3B,CAAb;AACD;;AAED,WAAK/B,CAAL,CACGC,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,cAFjB,EAGGA,IAHH,CAGQ,WAHR,oBAGqC,KAAKH,MAH1C,QAIGoC,IAJH,CAIQP,UAJR,EAKG3B,MALH,CAKU,MALV,EAMGC,IANH,CAMQ,GANR,EAMa,KAAKJ,KANlB,EAOGI,IAPH,CAOQ,IAPR,EAOc,SAPd,EAQGA,IARH,CAQQ,aARR,EAQuB,KARvB,EASGkC,IATH,CASQ,KAAKC,MATb;;AAWA,UAAIsD,QAAQ,KAAK3F,CAAL,CACTgC,SADS,CACC,aADD,EAEThD,IAFS,CAEJ,KAAK8B,SAFD,CAAZ;;AAIA6E,YAAM/C,IAAN,GAAaX,MAAb;;AAEA0D,cAAQA,MACL9C,KADK,GAEL5C,MAFK,CAEE,KAFF,EAGLC,IAHK,CAGA,OAHA,EAGS,YAHT,EAILA,IAJK,CAIA,GAJA,EAIK,UAAC5C,CAAD;AAAA,eAAO,MAAK6C,CAAL,CAAO7C,EAAE8D,KAAT,CAAP;AAAA,OAJL,EAKLlB,IALK,CAKA,GALA,EAKK,KAAKH,MAAL,GAAc,EALnB,CAAR;AAMA4F,YACG1F,MADH,CACU,QADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,QAFjB,EAGGA,IAHH,CAGQ,GAHR,EAGa,EAHb,EAIGA,IAJH,CAIQ,MAJR,EAIgB,UAAC5C,CAAD;AAAA,eAAO,MAAKmD,KAAL,CAAWnD,EAAE8D,KAAb,CAAP;AAAA,OAJhB;AAKAuE,YACG1F,MADH,CACU,MADV,EAEGmC,IAFH,CAEQ,UAAC9E,CAAD;AAAA,eAAOL,uBAAeK,EAAEkE,QAAjB,CAAP;AAAA,OAFR,EAGGtB,IAHH,CAGQ,IAHR,EAGc,QAHd,EAIGA,IAJH,CAIQ,IAJR,EAIc,QAJd,EAKGA,IALH,CAKQ,aALR,EAKuB,MALvB,EAMGA,IANH,CAMQ,WANR,EAMqB,aANrB;;AAQA,WAAKwF,aAAL,CAAmBC,KAAnB;AACD;AAzFM;AAtCkB,CAA7B;;;;;;ACTA;;;;AACA;;;;AAEA;;IAAYjH,E;;AACZ;;IAAY3B,C;;AACZ;;;;;;AAHAP,cAAIC,GAAJ,CAAQC,qBAAR;;;AAMAF,cAAIoC,SAAJ,CAAc,aAAd,EAA6B;AAC3BC,cAAY,CAAC,IAAD,EAAO,GAAP,CADe;AAE3BC,YAAU,kCAFiB;AAG3BC,SAAO,CACL,SADK,EACM,cADN,EACsB,SADtB,EACiC,QADjC,EAC2C,QAD3C,EACqD,QADrD,EAC+D,aAD/D,CAHoB;AAM3BC,QAAM,gBAAW;AACf,WAAO;AACL4H,0BAAoB;AADf,KAAP;AAGD,GAV0B;;AAY3B3H,SAZ2B,qBAYjB;AACR,QAAMC,QAAQ,KAAKC,GAAL,CAASC,aAAT,CAAuB,KAAvB,CAAd;AACA,QAAMC,YAAYH,MAAMI,qBAAN,EAAlB;AACA,QAAMC,MAAMb,GAAGc,MAAH,CAAUN,KAAV,CAAZ;AACA,QAAMO,UAAU;AACdC,WAAK,EADS;AAEdC,aAAO,CAFO;AAGdC,cAAQ,EAHM;AAIdC,YAAM,GAJQ;AAKdgH,cAAQ;AALM,KAAhB;;AAQA,SAAKC,OAAL,GAAepI,GAAGc,MAAH,CAAU,KAAKL,GAAL,CAASC,aAAT,CAAuB,gBAAvB,CAAV,CAAf;;AAEA,SAAKU,KAAL,GAAaT,UAAUS,KAAV,GAAkBL,QAAQI,IAA1B,GAAiCJ,QAAQE,KAAtD;AACA,SAAKI,MAAL,GAAcV,UAAUU,MAAV,GAAmBN,QAAQC,GAA3B,GAAiCD,QAAQG,MAAvD;AACA,SAAKmH,UAAL,GAAkB,KAAKjH,KAAL,GAAaL,QAAQoH,MAAvC;;AAEA,SAAK7G,CAAL,GAAST,IACNU,MADM,CACC,GADD,EAENC,IAFM,CAED,WAFC,iBAEyBT,QAAQI,IAFjC,UAE0CJ,QAAQE,KAFlD,OAAT;AAGA,SAAKmB,SAAL,GAAiB,EAAjB;;AAEA,SAAKX,CAAL,GAASzB,GAAG8B,WAAH,GAAiBH,UAAjB,CAA4B,CAAC,CAAD,EAAI,KAAK0G,UAAT,CAA5B,CAAT;AACA,SAAKxG,CAAL,GAAS7B,GAAG0B,SAAH,GAAeC,UAAf,CAA0B,CAAC,CAAD,EAAI,KAAKN,MAAT,CAA1B,EAA4CO,OAA5C,CAAoD,GAApD,CAAT;AACA,SAAK0G,CAAL,GAAStI,GAAGuI,YAAH,GAAkBvG,KAAlB,CAAwB,KAAKC,MAA7B,CAAT;;AAEA,SAAKuG,SAAL,GAAiB,KAAjB;AACA,SAAKC,eAAL,GAAuB,KAAK5C,WAAL,IAAoB,KAAKqC,kBAAhD;AACA,SAAKQ,eAAL,GAAuB,IAAvB;;AAEA,SAAKrG,aAAL;AACA,SAAKC,IAAL;AACD,GA7C0B;;;AA+C3BC,WAAS;AACPF,iBADO,2BACS;AACd,WAAKD,SAAL,GAAiB,KAAKK,YAAL,EAAjB;AACA,WAAKkG,SAAL,GAAiB,KAAKnD,OAAL,EAAjB;AACA,WAAK7C,UAAL;AACD,KALM;AAOPA,cAPO,wBAOM;AAAA;;AACX,WAAKlB,CAAL,CAAOoB,MAAP,CAAc,CAAC,CAAD,EAAI,CAAJ,CAAd;AACA,WAAKhB,CAAL,CAAOgB,MAAP,CACExE,EAAEmE,MAAF,CAAS,KAAKJ,SAAd,EAAyB,UAACxD,CAAD;AAAA,eAAOA,EAAE,MAAK6J,eAAP,CAAP;AAAA,OAAzB,EACG3J,GADH,CACO,UAACF,CAAD;AAAA,eAAOA,EAAEkE,QAAT;AAAA,OADP,CADF;AAIA,WAAKwF,CAAL,CAAOzF,MAAP,CAAc,KAAK8F,SAAnB;AACD,KAdM;AAgBPC,YAhBO,sBAgBI;AACT,WAAKtH,CAAL,CAAOgC,SAAP,CAAiB,eAAjB,EAAkCC,MAAlC;AACA,UAAIC,QAAQ,KAAKlC,CAAL,CACTC,MADS,CACF,GADE,EAETC,IAFS,CAEJ,OAFI,EAEK,cAFL,EAGTA,IAHS,CAGJ,WAHI,oBAGyB,KAAKH,MAH9B,QAIToC,IAJS,CAIJzD,GAAGmD,UAAH,CAAc,KAAK1B,CAAnB,EAAsBqC,KAAtB,CAA4B,EAA5B,EAAgC,GAAhC,CAJI,CAAZ;AAKAN,YACGF,SADH,CACa,MADb,EAEG9B,IAFH,CAEQ,WAFR,EAEqB,YAFrB,EAGGA,IAHH,CAGQ,aAHR,EAGuB,OAHvB;AAIAgC,YACGjC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,WAFR,iBAEkC,KAAK6G,UAFvC,QAGG7G,IAHH,CAGQ,IAHR,EAGc,GAHd,EAIGA,IAJH,CAIQ,IAJR,EAIc,QAJd,EAKGA,IALH,CAKQ,aALR,EAKuB,KALvB,EAMGkC,IANH,CAMQ,KAAKC,MANb;;AAQA,WAAKrC,CAAL,CAAOgC,SAAP,CAAiB,eAAjB,EAAkCC,MAAlC;AACA,WAAKjC,CAAL,CACGC,MADH,CACU,GADV,EAEGC,IAFH,CAEQ,OAFR,EAEiB,cAFjB,EAGGiC,IAHH,CAGQzD,GAAG6D,QAAH,CAAY,KAAKhC,CAAjB,CAHR,EAIGN,MAJH,CAIU,MAJV,EAKGC,IALH,CAKQ,IALR,EAKc,MALd,EAMGA,IANH,CAMQ,IANR,EAMc,SANd,EAOGA,IAPH,CAOQ,aAPR,EAOuB,KAPvB,EAQGkC,IARH,CAQQ,KAAKM,MARb;AASD,KA7CM;AA+CP6E,cA/CO,wBA+CM;AACX,WAAKvH,CAAL,CAAOgC,SAAP,CAAiB,SAAjB,EAA4BC,MAA5B;AACA,UAAI4E,SAAS,KAAK7G,CAAL,CACVC,MADU,CACH,GADG,EAEVC,IAFU,CAEL,OAFK,EAEI,QAFJ,EAGVA,IAHU,CAGL,aAHK,EAGU,KAHV,EAIVA,IAJU,CAIL,GAJK,EAIA,CAJA,EAKV8B,SALU,CAKA,GALA,EAMVhD,IANU,CAML,KAAKqI,SANA,EAOVxE,KAPU,GAQV5C,MARU,CAQH,GARG,EASVC,IATU,CASL,WATK,EASQ,UAAC5C,CAAD,EAAIkK,CAAJ;AAAA,iCAA0BA,IAAI,EAA9B;AAAA,OATR,CAAb;;AAWAX,aACG5G,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,GAFR,EAEa,KAAKJ,KAAL,GAAa,EAF1B,EAGGI,IAHH,CAGQ,OAHR,EAGiB,EAHjB,EAIGA,IAJH,CAIQ,QAJR,EAIkB,EAJlB,EAKGA,IALH,CAKQ,MALR,EAKgB,KAAK8G,CALrB;;AAOAH,aACG5G,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,GAFR,EAEa,EAFb,EAGGA,IAHH,CAGQ,IAHR,EAGc,SAHd,EAIGA,IAJH,CAIQ,WAJR,kBAIkC,KAAKJ,KAAL,GAAa,EAJ/C,qBAKGI,IALH,CAKQ,aALR,EAKuB,KALvB,EAMGkC,IANH,CAMQ,UAAC9E,CAAD;AAAA,eAAOA,CAAP;AAAA,OANR;AAOD,KA1EM;AA4EPmK,cA5EO,wBA4EM;AACX,aAAO,KAAKzH,CAAL,CACJgC,SADI,CACM,YADN,EAEJhD,IAFI,CAECN,GAAGgJ,KAAH,GAAWC,IAAX,CAAgB,KAAKN,SAArB,EAAgC,KAAKvG,SAArC,CAFD,EAGJkB,SAHI,CAGM,MAHN,EAIJhD,IAJI,CAIC,UAAC1B,CAAD;AAAA,eAAOA,CAAP;AAAA,OAJD,CAAP;AAKD,KAlFM;AAoFPsK,kBApFO,4BAoFU;AACf,aAAOlJ,GAAGsD,SAAH,CAAa,oCAAb,CAAP;AACD,KAtFM;AAwFP6F,YAxFO,oBAwFElF,IAxFF,EAwFQ;AACb,aAAOA,KACJmF,UADI,GAEJC,QAFI,CAEK,GAFL,EAGJ7H,IAHI,CAGC,GAHD,EAGM,CAHN,CAAP;AAID,KA7FM;AA+FP8H,cA/FO,sBA+FIrF,IA/FJ,EA+FU;AAAA;;AACf,aAAOA,KACJmF,UADI,GAEJC,QAFI,CAEK,GAFL,EAGJ7H,IAHI,CAGC,GAHD,EAGM,UAAC5C,CAAD;AAAA,eAAO,OAAK6C,CAAL,CAAO7C,EAAE,CAAF,CAAP,CAAP;AAAA,OAHN,CAAP;AAID,KApGM;AAsGP2K,cAtGO,sBAsGItF,IAtGJ,EAsGU;AAAA;;AACf,aAAOA,KACJmF,UADI,GAEJC,QAFI,CAEK,GAFL,EAGJ7H,IAHI,CAGC,GAHD,EAGM,UAAC5C,CAAD;AAAA,eAAO,OAAKiD,CAAL,CAAOjD,EAAE0B,IAAF,CAAOwC,QAAd,CAAP;AAAA,OAHN,CAAP;AAID,KA3GM;AA6GP0G,qBA7GO,+BA6Ga;AAClBxJ,SAAGsD,SAAH,CAAa,qCAAb,EACGqE,OADH,CACW,mBADX,EACgC,IADhC,EAEGyB,UAFH,GAGGC,QAHH,CAGY,GAHZ,EAIGI,KAJH,CAIS,SAJT,EAIoB,CAJpB;AAKD,KAnHM;AAqHPC,eArHO,yBAqHO;AACZ1J,SAAGsD,SAAH,CAAa,YAAb,EACGqE,OADH,CACW,mBADX,EACgC,KADhC,EAEGyB,UAFH,GAGGC,QAHH,CAGY,GAHZ,EAIGI,KAJH,CAIS,SAJT,EAIoB,CAJpB;AAKD,KA3HM;AA6HPE,YA7HO,oBA6HE1L,EA7HF,EA6HM;AACX,WAAKuK,SAAL,GAAiB,IAAjB;AACA,UAAIoB,WAAW3L,GAAG4L,UAAlB;AACA,UAAIC,cAAc9J,GAAGc,MAAH,CAAU8I,QAAV,EAAoBG,KAApB,EAAlB;AACA,WAAKtB,eAAL,GAAuBqB,YAAYE,GAAnC;;AAEAhK,SAAGc,MAAH,CAAU8I,QAAV,EACGjC,OADH,CACW,oBADX,EACiC,IADjC;;AAGA,WAAK6B,iBAAL;AACA,WAAK7G,UAAL;AACA,WAAKiG,QAAL;AACA,WAAKW,UAAL,CAAgB,KAAKJ,QAAL,CAAc,KAAKD,cAAL,EAAd,CAAhB;AACD,KA1IM;AA4IPe,cA5IO,wBA4IM;AAAA;;AACX,WAAKzB,SAAL,GAAiB,KAAjB;AACA,WAAKE,eAAL,GAAuB,KAAvB;AACA,WAAKD,eAAL,GAAuB,KAAK5C,WAAL,IAAoB,KAAKqC,kBAAhD;;AAEAlI,SAAGc,MAAH,CAAU,qBAAV,EACG6G,OADH,CACW,oBADX,EACiC,KADjC;;AAGA,WAAKhF,UAAL;AACA,WAAKiG,QAAL;AACA,WAAKU,UAAL,CAAgB,KAAKC,UAAL,CAAgB,KAAKR,UAAL,EAAhB,CAAhB;AACAmB,iBAAW,YAAM;AACf,eAAKxB,eAAL,GAAuB,IAAvB;AACA,eAAKgB,WAAL;AACD,OAHD,EAGG,GAHH;AAID,KA3JM;AA6JPS,eA7JO,uBA6JKlM,EA7JL,EA6JSW,CA7JT,EA6JY;AACjB,UAAI,CAAC,KAAK8J,eAAV,EAA2B;AACzB;AACD;AACD,UAAI0B,OAAOnM,GAAG2C,qBAAH,EAAX;AACA,UAAIyJ,SAAS,CAAC,KAAK5I,CAAL,CAAO7C,EAAE,CAAF,CAAP,IAAe,KAAK6C,CAAL,CAAO7C,EAAE,CAAF,CAAP,CAAhB,IAAgC,CAA7C;AACA,UAAIuC,OAAOiJ,KAAKjJ,IAAL,GAAYmJ,OAAOC,OAAnB,GAA6BF,MAAxC;AACA,UAAIrJ,MAAMoJ,KAAKpJ,GAAL,GAAWsJ,OAAOE,OAA5B;AACA,UAAIZ,WAAW3L,GAAG4L,UAAlB;AACA,UAAIC,cAAc9J,GAAGc,MAAH,CAAU8I,QAAV,EAAoBG,KAApB,EAAlB;AACA,UAAI,KAAKvB,SAAL,IAAkB,CAAExI,GAAGc,MAAH,CAAU8I,QAAV,EAAoBjC,OAApB,CAA4B,oBAA5B,CAAxB,EAA4E;AAC1E;AACD;AACD,WAAKS,OAAL,CACGgB,UADH,GAEGC,QAFH,CAEY,GAFZ,EAGGI,KAHH,CAGS,SAHT,EAGoB,CAHpB;AAIA,WAAKrB,OAAL,CACGqC,IADH,CACQX,YAAYE,GAAZ,GAAkB,IAAlB,GAAyB,CAACpL,EAAE0B,IAAF,CAAOwJ,YAAYE,GAAnB,IAA0B,GAA3B,EAAgCU,OAAhC,CAAwC,CAAxC,CAAzB,GAAsE,GAD9E,EAEGjB,KAFH,CAES,MAFT,EAEiBtI,OAAO,IAFxB,EAGGsI,KAHH,CAGS,KAHT,EAGgBzI,MAAM,IAHtB;AAIAhB,SAAGc,MAAH,CAAU7C,EAAV,EAAc0J,OAAd,CAAsB,QAAtB,EAAgC,IAAhC;AACD,KAnLM;AAqLPgD,eArLO,uBAqLK1M,EArLL,EAqLSW,CArLT,EAqLY;AACjB,WAAKwJ,OAAL,CACGgB,UADH,GAEGC,QAFH,CAEY,GAFZ,EAGGI,KAHH,CAGS,SAHT,EAGoB,CAHpB;AAIAzJ,SAAGc,MAAH,CAAU7C,EAAV,EAAc0J,OAAd,CAAsB,QAAtB,EAAgC,KAAhC;AACD,KA3LM;AA6LPiD,eA7LO,uBA6LK3M,EA7LL,EA6LSW,CA7LT,EA6LY;AACjB,UAAI,KAAK4J,SAAT,EAAoB;AAClB,aAAKyB,UAAL,CAAgBhM,EAAhB;AACD,OAFD,MAEO;AACL,aAAK0L,QAAL,CAAc1L,EAAd;AACD;AACF,KAnMM;AAqMP4M,YArMO,sBAqMI;AAAA;;AACT,UAAIC,YAAY,KAAKxJ,CAAL,CACbgC,SADa,CACH,YADG,EAEbhD,IAFa,CAERN,GAAGgJ,KAAH,GAAWC,IAAX,CAAgB,KAAKN,SAArB,EAAgC,KAAKvG,SAArC,CAFQ,CAAhB;;AAIA0I,gBAAU5G,IAAV,GAAiBX,MAAjB;;AAEAuH,kBAAYA,UACT3G,KADS,GAET5C,MAFS,CAEF,GAFE,EAGTC,IAHS,CAGJ,MAHI,EAGI,UAAC5C,CAAD;AAAA,eAAO,OAAK0J,CAAL,CAAO1J,EAAEoL,GAAT,CAAP;AAAA,OAHJ,EAITxI,IAJS,CAIJ,OAJI,EAIK,WAJL,CAAZ;;AAMAsJ,gBACGxH,SADH,CACa,MADb,EAEGhD,IAFH,CAEQ,UAAC1B,CAAD;AAAA,eAAOA,CAAP;AAAA,OAFR,EAGGuF,KAHH,GAIG5C,MAJH,CAIU,MAJV,EAKGC,IALH,CAKQ,OALR,EAKiB,KALjB,EAMGA,IANH,CAMQ,GANR,EAMa,UAAC5C,CAAD;AAAA,eAAO,OAAK6C,CAAL,CAAO7C,EAAE,CAAF,CAAP,CAAP;AAAA,OANb,EAOG4C,IAPH,CAOQ,GAPR,EAOa,UAAC5C,CAAD;AAAA,eAAO,OAAKiD,CAAL,CAAOjD,EAAE0B,IAAF,CAAOwC,QAAd,CAAP;AAAA,OAPb,EAQGtB,IARH,CAQQ,QARR,EAQkB,KAAKK,CAAL,CAAOuC,SAAP,EARlB,EASG5C,IATH,CASQ,OATR,EASiB,UAAC5C,CAAD;AAAA,eAAO,OAAK6C,CAAL,CAAO7C,EAAE,CAAF,CAAP,IAAe,OAAK6C,CAAL,CAAO7C,EAAE,CAAF,CAAP,CAAtB;AAAA,OATjB,EAUGmM,EAVH,CAUM,WAVN,EAUmB,uBAAY,IAAZ,EAAkB,KAAKZ,WAAvB,CAVnB,EAWGY,EAXH,CAWM,UAXN,EAWkB,uBAAY,IAAZ,EAAkB,KAAKJ,WAAvB,CAXlB,EAYGI,EAZH,CAYM,OAZN,EAYe,uBAAY,IAAZ,EAAkB,KAAKH,WAAvB,CAZf;AAaD,KA/NM;AAiOPtI,QAjOO,kBAiOA;AACL,WAAKuI,QAAL;AACA,WAAKjC,QAAL;AACA,WAAKC,UAAL;AACD;AArOM;AA/CkB,CAA7B;;;;;;;;;QCEgBpC,kB,GAAAA,kB;QAsCAhB,kB,GAAAA,kB;QAIAiB,e,GAAAA,e;QAyBAd,e,GAAAA,e;QAIAE,sB,GAAAA,sB;QAIAa,U,GAAAA,U;QA2BAX,U,GAAAA,U;QAIAC,iB,GAAAA,iB;QAIAE,gB,GAAAA,gB;QAeAC,c,GAAAA,c;QAWAC,mB,GAAAA,mB;QAWAC,oB,GAAAA,oB;QAWAC,mB,GAAAA,mB;QAWAC,oB,GAAAA,oB;;AAnLhB;;AAQA;;IAAYnI,C;;;;AAEL,SAASoI,kBAAT,CAA4B3B,OAA5B,EAAqC;AAC1C,SAAO,YAAW;AAChB,QAAIkG,OAAO,MAAX;AACA,QAAMC,SAAS,SAATA,MAAS,CAACC,IAAD;AAAA,aAAU7L,8BAAsB6L,IAAhC;AAAA,KAAf;;AAEA,WAAO5M,kBAAUQ,GAAV,CAAc,UAACgE,QAAD,EAAc;AACjC,UAAIqI,QAAQ3L,qBAAa4L,MAAb,CAAoB,UAACD,KAAD,EAAQE,WAAR,EAAwB;AACtD,eAAOF,QAAQrG,QAAQhC,QAAR,EAAkBmI,OAAOI,WAAP,CAAlB,EAAuCL,IAAvC,CAAf;AACD,OAFW,EAET,CAFS,CAAZ;;AAIA,UAAIM,eAAe9L,qBAAa4L,MAAb,CAAoB,UAACE,YAAD,EAAeD,WAAf,EAA+B;AACpE,YAAI9L,6BAAqBgM,QAArB,CAA8BF,WAA9B,CAAJ,EAAgD;AAC9C,iBAAOC,YAAP;AACD;;AAED,YAAIE,WAAW1G,QAAQhC,QAAR,EAAkBmI,OAAOI,WAAP,CAAlB,EAAuCL,IAAvC,CAAf;AACA,YAAIS,oBAAoBD,WAAWL,KAAnC;AACAG,qBAAaD,WAAb,IAA4BI,iBAA5B;;AAEA,YAAIJ,eAAe/L,2BAAnB,EAAwC;AACtCgM,uBAAaD,WAAb,KAA6B9L,6BAAqB6L,MAArB,CAC3B,UAACM,GAAD,EAAMC,cAAN,EAAyB;AACvB,mBAAOD,MAAM5G,QAAQhC,QAAR,EAAkBmI,OAAOU,cAAP,CAAlB,EAA0CX,IAA1C,IAAkDG,KAA/D;AACD,WAH0B,EAGxB,CAHwB,CAA7B;AAKD;;AAED,eAAOG,YAAP;AACD,OAlBkB,EAkBhB,EAlBgB,CAAnB;;AAoBAA,mBAAaH,KAAb,GAAqBA,KAArB;AACAG,mBAAaxI,QAAb,GAAwBvE,uBAAeuE,QAAf,CAAxB;;AAEA,aAAOwI,YAAP;AACD,KA7BM,CAAP;AA8BD,GAlCD;AAmCD;;AAEM,SAAS7F,kBAAT,GAA8B;AACnC,SAAOhG,+BAAP;AACD;;AAEM,SAASiH,eAAT,CAAyB5B,OAAzB,EAAkC;AACvC,SAAO,YAAW;AAChB,QAAIkG,OAAO,MAAX;AACA,QAAMC,SAAS,SAATA,MAAS,CAACC,IAAD;AAAA,aAAUvL,2BAAmBuL,IAA7B;AAAA,KAAf;;AAEA,WAAO5M,kBAAUQ,GAAV,CAAc,UAACgE,QAAD,EAAc;AACjC,UAAIqI,QAAQvL,kBAAUwL,MAAV,CAAiB,UAACD,KAAD,EAAQS,QAAR,EAAqB;AAChD,eAAOT,QAAQrG,QAAQhC,QAAR,EAAkBmI,OAAOW,QAAP,CAAlB,EAAoCZ,IAApC,CAAf;AACD,OAFW,EAET,CAFS,CAAZ;;AAIA,UAAIM,eAAe1L,kBAAUwL,MAAV,CAAiB,UAACE,YAAD,EAAeM,QAAf,EAA4B;AAC9D,YAAIJ,WAAW1G,QAAQhC,QAAR,EAAkBmI,OAAOW,QAAP,CAAlB,EAAoCZ,IAApC,CAAf;AACA,YAAIS,oBAAoBD,WAAWL,KAAnC;AACAG,qBAAaM,QAAb,IAAyBH,iBAAzB;AACA,eAAOH,YAAP;AACD,OALkB,EAKhB,EALgB,CAAnB;;AAOAA,mBAAaH,KAAb,GAAqBA,KAArB;AACAG,mBAAaxI,QAAb,GAAwBvE,uBAAeuE,QAAf,CAAxB;;AAEA,aAAOwI,YAAP;AACD,KAhBM,CAAP;AAiBD,GArBD;AAsBD;;AAEM,SAAS1F,eAAT,GAA2B;AAChC,SAAOhG,iBAAP;AACD;;AAEM,SAASkG,sBAAT,GAAkC;AACvC,SAAOjG,8BAAP;AACD;;AAEM,SAAS8G,UAAT,CAAoB7B,OAApB,EAA6B;AAClC,SAAO,YAAW;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAMC,SAAS,SAATA,MAAS,CAACC,IAAD;AAAA,aAAUzM,4BAAoByM,IAA9B;AAAA,KAAf;;AAEA,WAAO5M,kBAAUQ,GAAV,CAAc,UAACgE,QAAD,EAAc;AACjC,UAAIqI,QAAQzM,mBAAW0M,MAAX,CAAkB,UAACD,KAAD,EAAQU,QAAR,EAAqB;AACjD,eAAOV,QAAQrG,QAAQhC,QAAR,EAAkBmI,OAAOY,QAAP,CAAlB,EAAoCb,IAApC,CAAf;AACD,OAFW,EAET,CAFS,CAAZ;;AAIA,UAAIM,eAAe5M,mBAAW0M,MAAX,CAAkB,UAACE,YAAD,EAAeO,QAAf,EAA4B;AAC/D,YAAIL,WAAW1G,QAAQhC,QAAR,EAAkBmI,OAAOY,QAAP,CAAlB,EAAoCb,IAApC,CAAf;AACA,YAAIS,oBAAoBD,WAAWL,KAAnC;AACA,YAAIW,aAAa9M,6BAAqB6M,QAArB,CAAjB;AACAP,qBAAaQ,UAAb,IAA2BR,aAAaQ,UAAb,KAA4B,CAAvD;AACAR,qBAAaQ,UAAb,KAA4BL,iBAA5B;AACA,eAAOH,YAAP;AACD,OAPkB,EAOhB,EAPgB,CAAnB;;AASAA,mBAAaH,KAAb,GAAqBA,KAArB;AACAG,mBAAaxI,QAAb,GAAwBvE,uBAAeuE,QAAf,CAAxB;;AAEA,aAAOwI,YAAP;AACD,KAlBM,CAAP;AAmBD,GAvBD;AAwBD;;AAEM,SAAStF,UAAT,GAAsB;AAC3B,SAAO/G,0BAAP;AACD;;AAEM,SAASgH,iBAAT,GAA6B;AAClC,SAAO7G,+BAAP;AACD;;AAEM,SAAS+G,gBAAT,CAA0BrB,OAA1B,EAAmC;AACxC,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eACE,MAAKoC,OAAL,CAAahC,QAAb,EAAuB,wBAAvB,EAAiDkI,IAAjD,KACE,MAAKlG,OAAL,CAAahC,QAAb,EAAuB,wBAAvB,EAAiDkI,IAAjD,IACA,MAAKlG,OAAL,CAAahC,QAAb,EAAuB,wBAAvB,EAAiDkI,IAAjD,CAFF;AAHyC,OAAf;AAAA,KAAd,CAAhB;AAQA,WAAO5I,SAAP;AACD,GAXD;AAYD;;AAEM,SAASgE,cAAT,CAAwBtB,OAAxB,EAAiC;AACtC,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eAAO,OAAKoC,OAAL,CAAahC,QAAb,EAAuB,kBAAvB,EAA2CkI,IAA3C,IAAmD;AAFf,OAAf;AAAA,KAAd,CAAhB;AAIA,WAAO5I,SAAP;AACD,GAPD;AAQD;;AAEM,SAASiE,mBAAT,CAA6BvB,OAA7B,EAAsC;AAC3C,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eAAO,OAAKoC,OAAL,CAAahC,QAAb,EAAuB,2BAAvB,EAAoDkI,IAApD;AAFoC,OAAf;AAAA,KAAd,CAAhB;AAIA,WAAO5I,SAAP;AACD,GAPD;AAQD;;AAEM,SAASkE,oBAAT,CAA8BxB,OAA9B,EAAuC;AAC5C,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eAAO,OAAKoC,OAAL,CAAahC,QAAb,EAAuB,+BAAvB,EAAwDkI,IAAxD;AAFoC,OAAf;AAAA,KAAd,CAAhB;AAIA,WAAO5I,SAAP;AACD,GAPD;AAQD;;AAEM,SAASmE,mBAAT,CAA6BzB,OAA7B,EAAsC;AAC3C,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eAAO,OAAKoC,OAAL,CAAahC,QAAb,EAAuB,4BAAvB,EAAqDkI,IAArD;AAFoC,OAAf;AAAA,KAAd,CAAhB;AAIA,WAAO5I,SAAP;AACD,GAPD;AAQD;;AAEM,SAASoE,oBAAT,CAA8B1B,OAA9B,EAAuC;AAC5C,SAAO,YAAW;AAAA;;AAChB,QAAMkG,OAAO,MAAb;AACA,QAAI5I,YAAY9D,kBAAUQ,GAAV,CAAc,UAACgE,QAAD;AAAA,aAAe;AAC3CA,kBAAUA,QADiC;AAE3CJ,eAAO,OAAKoC,OAAL,CAAahC,QAAb,EAAuB,gCAAvB,EAAyDkI,IAAzD;AAFoC,OAAf;AAAA,KAAd,CAAhB;AAIA,WAAO5I,SAAP;AACD,GAPD;AAQD;;;;;;;;;QCtJe4C,O,GAAAA,O;;AAtChB;;AACA;;;;AACA;;IAAYhF,E;;;;;;AAGZ,SAAS+L,qBAAT,CAA+BT,YAA/B,EAA6C;AAC3C,SAAOA,aAAaF,MAAb,CAAoB,UAACY,OAAD,EAAUjC,KAAV,EAAoB;AAC7CiC,YAAQjC,MAAM,MAAN,CAAR,IAAyBA,KAAzB;AACA,WAAOiC,OAAP;AACD,GAHM,EAGJ,EAHI,CAAP;AAID;;AAGD,SAASC,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,MAAMC,aAAa,CACjB,MADiB,EACT,MADS,EACD,MADC,EACO,MADP,EACe,MADf,EACuB,MADvB,EAC+B,MAD/B,EACuC,MADvC,EAC+C,MAD/C,EAEjB,MAFiB,EAET,MAFS,EAED,MAFC,EAEO,MAFP,EAEe,MAFf,EAEuB,MAFvB,EAE+B,MAF/B,EAEuC,MAFvC,EAE+C,MAF/C,CAAnB;AAIAA,aAAWC,OAAX,CAAmB,UAACpC,GAAD,EAAS;AAC1B,QAAIkC,IAAIlC,GAAJ,EAAS/G,MAAT,IAAmB,CAAnB,IAAwBiJ,IAAIlC,GAAJ,KAAY,GAAxC,EAA6C;AAC3CkC,UAAIlC,GAAJ,IAAW,IAAX;AACD,KAFD,MAEO;AACLkC,UAAIlC,GAAJ,IAAW,CAACkC,IAAIlC,GAAJ,CAAZ;AACD;AACF,GAND;AAOA,SAAOkC,GAAP;AACD;;AAGD,SAASG,WAAT,CAAqBvH,OAArB,EAA8BhC,QAA9B,EAAwCwJ,IAAxC,EAA8C;AAC5C;AACAtM,KAAGuM,GAAH,CAAOzM,iBAASC,OAAT,GAAmB+C,QAAnB,GAA8B,MAArC,EAA6CmJ,YAA7C,EAA2D,UAACX,YAAD,EAAkB;AAC3ExG,YAAQhC,QAAR,IAAoBiJ,sBAAsBT,YAAtB,CAApB;AACAgB,SAAK,IAAL,EAAWxH,OAAX;AACD,GAHD;AAID;;AAGM,SAASE,OAAT,CAAiBsH,IAAjB,EAAuB;AAC5BE,kBAAMpB,MAAN,CAAa9M,iBAAb,EAAwB,EAAxB,EAA4B+N,WAA5B,EAAyCC,IAAzC;AACD;;;;;;;;;;;;ACxCD;;IAAYG,K;;AACZ;;IAAYpO,C;;AACZ;;AACA;;IAAY4D,M;;;;;;IAGSqC,S;AACnB,2BAA4B;AAAA;;AAAA,QAAfC,YAAe,QAAfA,YAAe;;AAAA;;AAC1B,SAAKmI,WAAL,GAAmBC,SAASjM,aAAT,CAAuB6D,YAAvB,CAAnB;;AAEA,SAAKqI,UAAL,GAAkB,EAAlB;AACA,SAAKC,WAAL,GAAmB,GAAnB;AACA,SAAKC,cAAL,GAAsB,IAAK,KAAKD,WAAL,GAAmB,CAA9C;AACA,SAAKE,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,2BAAL,GAAmC,CAAnC;AACA,SAAKC,UAAL,GAAkB,KAAKL,cAAvB;AACA,SAAKM,WAAL,GAAmB,CAAnB;AACA,SAAKC,UAAL,GAAkB,KAAKF,UAAL,GAAkB,KAAKC,WAAzC;AACA,SAAKE,oBAAL,GAA4B,KAA5B;AACA,SAAKC,oBAAL,GAA4B,KAA5B;AACA,SAAKC,gBAAL,GAAwB,CAAxB;AACA,SAAKC,gBAAL,GAAwB,CAAxB;AACA,SAAKC,eAAL,GAAuB,GAAvB;AACA,SAAKC,eAAL,GAAuB,GAAvB;;AAEA,SAAKC,gBAAL;;AAEA,SAAKC,KAAL,GAAa,KAAKC,SAAL,EAAb;AACA,SAAKC,MAAL,GAAc,KAAKC,UAAL,EAAd;AACA,SAAKC,QAAL,GAAgB,KAAKC,YAAL,EAAhB;AACA,SAAKC,WAAL;AACA,SAAKC,MAAL,GAAc,KAAKC,UAAL,EAAd;;AAEA7J,QAAI8F,MAAJ,EAAYgE,IAAZ,CAAiB,QAAjB,EAA2B;AAAA,aAAM,MAAKC,wBAAL,EAAN;AAAA,KAA3B;AACA/J,QAAI,KAAKkI,WAAT,EAAsB4B,IAAtB,CAA2B,WAA3B,EAAwC,KAAKE,YAAL,CAAkBF,IAAlB,CAAuB,IAAvB,CAAxC;;AAEA,SAAKG,eAAL;AACA,SAAKC,MAAL;AACD;;;;iCAEYC,K,EAAO;AAClB,UAAMC,eAAeD,MAAME,OAAN,GAAiB,KAAKzN,KAAL,GAAa,CAAnD;AACA,WAAKqM,gBAAL,GAAwB,CAACmB,YAAD,GAAgB,KAAKtB,oBAA7C;;AAEA,UAAMwB,eAAeH,MAAMI,OAAN,GAAiB,KAAK1N,MAAL,GAAc,CAApD;AACA,WAAKmM,gBAAL,GAAwB,CAACsB,YAAD,GAAgB,KAAKvB,oBAA7C;AACD;;;2CAEsB;AACrB,WAAKQ,MAAL,CAAYiB,QAAZ,CAAqBvN,CAArB,IAA0B,CAAC,KAAK+L,gBAAL,GAAwB,KAAKO,MAAL,CAAYiB,QAAZ,CAAqBvN,CAA9C,IAAmD,KAAKiM,eAAlF;AACA,WAAKK,MAAL,CAAYiB,QAAZ,CAAqBnN,CAArB,IAA0B,CAAC,KAAK4L,gBAAL,GAAwB,KAAKM,MAAL,CAAYiB,QAAZ,CAAqBnN,CAA9C,IAAmD,KAAK8L,eAAlF;AACD;;;gDAE2B;AAAA;;AAC1B,WAAKsB,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBnQ,GAAtB,CAA0B,UAACoQ,SAAD,EAAYC,KAAZ,EAAsB;AACtE,YAAIC,SAAS,OAAKC,OAAL,CAAaF,KAAb,CAAb;AACA,YAAIG,kBAAkBF,OAAOG,QAAP,CAAgBjH,CAAhB,GAAoB,OAAK+E,UAA/C;AACA,YAAImC,iBAAiBJ,OAAOG,QAAP,CAAgBjH,CAAhB,GAAoB,OAAK6E,UAA9C;AACA,YAAIsC,oBAAoB7H,KAAK8H,MAAL,KAAgB,OAAKxC,2BAA7C;AACA,YAAIoC,mBAAmBE,cAAnB,IAAqCC,iBAAzC,EAA4D;AAC1D,iBAAOP,YAAY,CAAC,CAApB;AACD,SAFD,MAEO;AACL,iBAAOA,SAAP;AACD;AACF,OAVuB,CAAxB;AAWD;;;4CAEuB;AAAA;;AACtB,WAAKG,OAAL,CAAajD,OAAb,CAAqB,UAACgD,MAAD,EAASD,KAAT,EAAmB;AACtC,YAAIQ,SAAS,OAAK1C,WAAL,GAAmB,OAAKgC,gBAAL,CAAsBE,KAAtB,CAAhC;AACAC,eAAOG,QAAP,CAAgBjH,CAAhB,IAAqBqH,MAArB;AACD,OAHD;AAID;;;8BAES;AACR,WAAKC,yBAAL;AACA,WAAKC,qBAAL;AACA,WAAKC,oBAAL;AACD;;;6BAEQ;AAAA;;AACP,WAAKC,OAAL;AACA,WAAK9B,QAAL,CAAcS,MAAd,CAAqB,KAAKb,KAA1B,EAAiC,KAAKE,MAAtC;AACAiC,4BAAsB;AAAA,eAAM,OAAKtB,MAAL,EAAN;AAAA,OAAtB;AACD;;;gCAEW;AACV,UAAIb,QAAQ,IAAIpB,MAAMwD,KAAV,EAAZ;AACA,aAAOpC,KAAP;AACD;;;iCAEY;AACX;AACA,UAAIE,SAAS,IAAItB,MAAMyD,iBAAV,CAA4B,KAAKC,SAAjC,EAA4C,KAAKC,WAAjD,EAA8D,GAA9D,EAAmE,IAAnE,CAAb;AACArC,aAAOsC,EAAP,GAAY,IAAI5D,MAAM6D,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAZ;AACAvC,aAAOiB,QAAP,CAAgBvN,CAAhB,GAAoB,KAAK8O,WAAzB;AACAxC,aAAOwB,QAAP,CAAgB9N,CAAhB,GAAoB,EAAE,KAAKmL,UAAL,GAAkB,CAApB,CAApB;AACAmB,aAAOwB,QAAP,CAAgBjH,CAAhB,GAAoB,KAAKkI,OAAzB;AACA,aAAOzC,MAAP;AACD;;;mCAEc;AACb;AACA,UAAIE,WAAW,IAAIxB,MAAMgE,aAAV,CAAwB;AACrCC,sBAAc,IADuB;AAErCC,eAAO;AAF8B,OAAxB,CAAf;AAIA;AACA;AACA;AACA1C,eAAS2C,OAAT,CAAiB,KAAKxP,KAAtB,EAA6B,KAAKC,MAAlC;AACA,WAAKqL,WAAL,CAAiBmE,WAAjB,CAA6B5C,SAAS6C,UAAtC;AACA,aAAO7C,QAAP;AACD;;;8CAE0C;AAAA,UAAvB7M,KAAuB,SAAvBA,KAAuB;AAAA,UAAhBC,MAAgB,SAAhBA,MAAgB;AAAA,UAAR0P,KAAQ,SAARA,KAAQ;;AACzC,aAAO,IAAItE,MAAMuE,YAAV,CAAuB5P,KAAvB,EAA8BC,MAA9B,EAAsC0P,KAAtC,CAAP;AACD;;;+BAEUtP,C,EAAGI,C,EAAG;AACf,UAAIoP,WAAWhP,OAAO7D,iBAAtB;AACA,UAAI8S,aAAa,CAAjB;AACA,UAAIC,YAAYF,SAASC,UAAT,CAAhB;AACA,UAAInP,QAAQqP,SAASD,UAAUE,KAAV,CAAgB,CAAhB,CAAT,EAA6B,EAA7B,CAAZ;;AAEA,UAAIC,WAAW,IAAI7E,MAAM8E,mBAAV,CAA8B,EAACxP,OAAOA,KAAR,EAA9B,CAAf;;AAEA,UAAIyP,WAAW,KAAKC,kBAAL,CAAwB;AACrCrQ,eAAO,KAAKwL,UADyB;AAErCvL,gBAAQ,KAAKuL,UAFwB;AAGrCmE,eAAO,KAAKlE;AAHyB,OAAxB,CAAf;;AAMA,UAAI6E,OAAO,IAAIjF,MAAMkF,IAAV,CAAeH,QAAf,EAAyBF,QAAzB,CAAX;AACA;AACA;;AAEA,UAAIM,UAAU,KAAK9E,cAAL,GAAuBzO,EAAEqR,MAAF,CAAS,CAAT,EAAY,KAAKtC,WAAL,GAAmB,EAA/B,IAAqC,EAA1E;AACAsE,WAAKnC,QAAL,CAAcsC,GAAd,CAAkBpQ,CAAlB,EAAqBI,CAArB,EAAwB+P,OAAxB;;AAEA,WAAK/D,KAAL,CAAWiE,GAAX,CAAeJ,IAAf;;AAEA,aAAOA,IAAP;AACD;;;kCAEa;AAAA;;AACZ,UAAMK,SAAS1T,EAAE2D,KAAF,CAAQ,IAAI,KAAK+K,YAAjB,EAA+B,KAAKA,YAApC,CAAf;AACA,UAAMiF,SAAS3T,EAAE2D,KAAF,CAAQ,IAAI,KAAKgL,YAAjB,EAA+B,KAAKA,YAApC,CAAf;AACA,UAAIqC,UAAU0C,OAAO3G,MAAP,CAAc,UAAC6G,QAAD,EAAWC,MAAX,EAAsB;AAChD,YAAIC,WAAWH,OAAO5G,MAAP,CAAc,UAAC+G,QAAD,EAAWC,MAAX,EAAsB;AACjD,cAAIhD,SAAS,OAAKiD,UAAL,CACX,OAAKzF,UAAL,GAAkBsF,MADP,EAEX,OAAKtF,UAAL,GAAkBwF,MAFP,CAAb;AAIA,iBAAOD,SAASzM,MAAT,CAAgB,CAAC0J,MAAD,CAAhB,CAAP;AACD,SANc,EAMZ,EANY,CAAf;AAOA,eAAO6C,SAASvM,MAAT,CAAgByM,QAAhB,CAAP;AACD,OATa,EASX,EATW,CAAd;;AAWA,WAAK9C,OAAL,GAAeA,OAAf;AACA,WAAKJ,gBAAL,GAAwB,KAAKI,OAAL,CAAavQ,GAAb,CAAiB;AAAA,eAAM,CAAC,CAAC,CAAF,EAAK,CAAL,EAAQT,EAAEqR,MAAF,CAAS,CAAT,EAAY,CAAZ,CAAR,CAAN;AAAA,OAAjB,CAAxB;AACD;;;mCAEc4C,K,EAAO;AACpBA,YAAMC,UAAN,GAAmB,IAAnB;AACAD,YAAME,MAAN,CAAaC,OAAb,CAAqBrR,KAArB,GAA6B,IAA7B;AACAkR,YAAME,MAAN,CAAaC,OAAb,CAAqBpR,MAArB,GAA8B,IAA9B;AACAiR,YAAME,MAAN,CAAazE,MAAb,CAAoB5M,IAApB,GAA2B,CAAC,GAA5B;AACAmR,YAAME,MAAN,CAAazE,MAAb,CAAoB9M,KAApB,GAA4B,GAA5B;AACAqR,YAAME,MAAN,CAAazE,MAAb,CAAoB/M,GAApB,GAA0B,GAA1B;AACAsR,YAAME,MAAN,CAAazE,MAAb,CAAoB7M,MAApB,GAA6B,CAAC,GAA9B;AACAoR,YAAME,MAAN,CAAazE,MAAb,CAAoB2E,GAApB,GAA0B,IAA1B;AACD;;;iCAEY;AACX,UAAIC,eAAe,IAAIlG,MAAMmG,YAAV,CAAuB,QAAvB,EAAiC,GAAjC,CAAnB;AACA,WAAK/E,KAAL,CAAWiE,GAAX,CAAea,YAAf;;AAEA,UAAIE,WAAW,IAAIpG,MAAMqG,gBAAV,CAA2B,QAA3B,EAAqC,IAArC,CAAf;AACAD,eAAStD,QAAT,CAAkBsC,GAAlB,CAAsB,GAAtB,EAA2B,GAA3B,EAAgC,EAAhC;AACA;AACA,WAAKhE,KAAL,CAAWiE,GAAX,CAAee,QAAf;;AAEA,UAAIE,YAAY,IAAItG,MAAMuG,SAAV,CAAoB,QAApB,EAA8B,GAA9B,CAAhB;AACAD,gBAAUxD,QAAV,CAAmBsC,GAAnB,CAAuB,GAAvB,EAA4B,GAA5B,EAAiC,GAAjC;AACA,WAAKhE,KAAL,CAAWiE,GAAX,CAAeiB,SAAf;AACD;;;uCAEkB;AACjB,WAAK3R,KAAL,GAAa,KAAKsL,WAAL,CAAiBuG,WAA9B;AACA,WAAK5R,MAAL,GAAc,KAAKqL,WAAL,CAAiBwG,YAA/B;AACA,WAAK9C,WAAL,GAAmB,KAAKhP,KAAL,GAAa,KAAKC,MAArC;AACA,WAAK8O,SAAL,GAAiB,EAAjB;AACA,WAAKK,OAAL,GAAe,EAAf;AACA,WAAKD,WAAL,GAAmB,IAAI3I,KAAKuL,EAAT,GAAc,GAAjC;AACD;;;sCAEiB;AAChB,WAAKpF,MAAL,CAAYqF,MAAZ,GAAqB,KAAKhD,WAA1B;AACA,WAAKrC,MAAL,CAAYsF,GAAZ,GAAkB,KAAKlD,SAAvB;AACA,WAAKpC,MAAL,CAAYiB,QAAZ,CAAqBvN,CAArB,GAAyB,KAAK8O,WAA9B;AACA,WAAKxC,MAAL,CAAYwB,QAAZ,CAAqBjH,CAArB,GAAyB,KAAKkI,OAA9B;AACA,WAAKzC,MAAL,CAAYuF,sBAAZ;AACA,WAAKrF,QAAL,CAAc2C,OAAd,CAAsB,KAAKxP,KAA3B,EAAkC,KAAKC,MAAvC;AACD;;;+CAE0B;AACzB,WAAKuM,gBAAL;AACA,WAAKa,eAAL;AACD;;;;;;kBA7MkBnK,S;;;;;;;;;QCNLiP,W,GAAAA,W;QAsBAvQ,Y,GAAAA,Y;AAtBT,SAASuQ,WAAT,CAAqBC,GAArB,EAA0BC,EAA1B,EAA8B;AACnC;;;;;;;;;;;;AAeA,SAAO,YAAW;AAChBA,OAAGC,KAAH,CAASF,GAAT,EAAc,GAAG9N,MAAH,CAAU,CAAC,IAAD,CAAV,EAAkBA,MAAlB,CAAyB,GAAG2L,KAAH,CAAS5N,IAAT,CAAckQ,SAAd,CAAzB,CAAd;AACD,GAFD;AAGD;;AAGM,SAAS3Q,YAAT,CAAsB1C,IAAtB,EAA4BsT,KAA5B,EAAmC;AACxC;;;;;;;AAOA,WAASC,MAAT,CAAgBvT,IAAhB,EAAsBsT,KAAtB,EAA6B;AAC3B;;;;;;AAMA,QAAIA,SAAS,CAAb,EAAgB;AACd,aAAO,EAAP;AACD;AACD,QAAIE,SAAS,EAAb;AACA,QAAIC,kBAAkB,CAAtB;;AAEA;AACA;AACA,QAAIC,OAAOpM,KAAKqM,KAAL,CAAW3T,KAAK2C,MAAL,GAAc,CAAzB,CAAX;AACA,QAAI3C,KAAK2C,MAAL,GAAc,CAAd,IAAmB,CAAvB,EAA0B;AACxB8Q,wBAAkB,CAAlB;AACAD,aAAOI,IAAP,CAAY5T,KAAK0T,IAAL,CAAZ;AACAJ;AACD;;AAED;AACA;AACA,QAAIO,WAAW7T,KAAK+Q,KAAL,CAAW,CAAX,EAAc2C,IAAd,CAAf;AACA,QAAII,YAAY9T,KAAK+Q,KAAL,CAAW2C,OAAOD,eAAlB,EAAmCzT,KAAK2C,MAAxC,CAAhB;;AAEA;AACA;AACA;AACA,QAAIoR,aAAaR,OAAOM,QAAP,EAAiBvM,KAAKqM,KAAL,CAAWL,QAAQ,CAAnB,CAAjB,CAAjB;AACA,QAAIU,cAAcT,OAAOO,SAAP,EAAkBxM,KAAK2M,IAAL,CAAUX,QAAQ,CAAlB,CAAlB,CAAlB;;AAEA,WAAO,GAAGlO,MAAH,CAAU2O,UAAV,EAAsBP,MAAtB,EAA8BQ,WAA9B,CAAP;AACD;;AAED,MAAIV,SAAS,CAAb,EAAgB;AACd,WAAO,EAAP;AACD;AACD,MAAIA,SAAS,CAAb,EAAgB;AACd,WAAOtT,KAAK,CAAL,CAAP;AACD;AACD,MAAIA,KAAK2C,MAAL,IAAe2Q,KAAnB,EAA0B;AACxB,WAAOtT,IAAP;AACD;;AAED,MAAIkU,eAAelU,KAAK,CAAL,CAAnB;AACA,MAAImU,cAAcnU,KAAKA,KAAK2C,MAAL,GAAc,CAAnB,CAAlB;AACA,MAAIyR,gBAAgBpU,KAAK+Q,KAAL,CAAW,CAAX,EAAc/Q,KAAK2C,MAAL,GAAc,CAA5B,CAApB;AACA,MAAI0R,iBAAiBd,OAAOa,aAAP,EAAsBd,QAAQ,CAA9B,CAArB;;AAEA,SAAO,GAAGlO,MAAH,CAAU,CAAC8O,YAAD,CAAV,EAA0BG,cAA1B,EAA0C,CAACF,WAAD,CAA1C,CAAP;AACD","file":"public/app.js","sourcesContent":["import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport './components/hero'\nimport './components/page'\nimport './components/range-chart'\nimport './components/bar-chart'\nimport './components/stack-chart'\nimport './components/map-chart'\n\nnew Vue({el: '#page-container'})\n","export const GRAPHIQ3_12 = [\n  '#2D0F41', '#3D1459', '#4D1A70', '#5E1F88', '#742796', '#973490',\n  '#B8428C', '#DB5087', '#E96A8D', '#EE8B96', '#F3ACA2', '#F9CEAC',\n]\n\nexport const GRAPHIQ3_12_LOWER = [\n  '#ffe8b1', '#fdd1a6', '#fdc09f', '#fca998', '#f9888f', '#f16588',\n  '#e14985', '#c2368f', '#9d299a', '#751e9a', '#641996', '#390d62',\n]\n\nexport const GRAPHIQ3_12_HIGHS = [\n  '#fdcda4', '#fdc2a0', '#fdbc9e', '#fdb99d', '#fcb19b', '#fca998',\n  '#fca597', '#fb9d95', '#fa9593',\n]\n","import * as _ from 'lodash'\n\nexport const DISTRICTS = [\n  'altstadt-grossbasel',\n  'altstadt-kleinbasel',\n  'am-ring',\n  'bachletten',\n  'bettingen',\n  'breite',\n  'bruderholz',\n  'clara',\n  'gotthelf',\n  'gundeldingen',\n  'hirzbrunnen',\n  'iselin',\n  'kleinhüningen',\n  'klybeck',\n  'matthäus',\n  'riehen',\n  'rosental',\n  'st-alban',\n  'st-johann',\n  'vorstädte',\n  'wettstein',\n]\n\nexport const DISTRICT_NAMES = {\n  'altstadt-grossbasel': 'Altstadt Grossbasel',\n  'altstadt-kleinbasel': 'Altstadt Kleinbasel',\n  'am-ring': 'Am Ring',\n  'bachletten': 'Bachletten',\n  'bettingen': 'Bettingen',\n  'breite': 'Breite',\n  'bruderholz': 'Bruderholz',\n  'clara': 'Clara',\n  'gotthelf': 'Gotthelf',\n  'gundeldingen': 'Gundeldingen',\n  'hirzbrunnen': 'Hirzbrunnen',\n  'iselin': 'Iselin',\n  'kleinhüningen': 'Kleinhüningen',\n  'klybeck': 'Klybeck',\n  'matthäus': 'Matthäus',\n  'riehen': 'Riehen',\n  'rosental': 'Rosental',\n  'st-alban': 'St. Alban',\n  'st-johann': 'St. Johann',\n  'vorstädte': 'Vorstädte',\n  'wettstein': 'Wettstein',\n}\n\nexport const MEASUREMENTS = [\n  'Bevölkerung: Schweizer',\n  'Bevölkerung: Ausländer',\n  'Fläche: Zonen S-6',\n  'Fläche: Zonen S-7',\n  'Fläche: Gesamt',\n  'Wanderungen Saldo: Schweizer',\n  'Umzüge Saldo: Schweizer',\n  'Wanderungen Saldo: Ausländer',\n  'Umzüge Saldo: Ausländer',\n  'Alter: 0-4',\n  'Alter: 5-9',\n  'Alter: 10-14',\n  'Alter: 15-19',\n  'Alter: 20-24',\n  'Alter: 25-29',\n  'Alter: 30-34',\n  'Alter: 35-39',\n  'Alter: 40-44',\n  'Alter: 45-49',\n  'Alter: 50-54',\n  'Alter: 55-59',\n  'Alter: 60-64',\n  'Alter: 65-69',\n  'Alter: 70-74',\n  'Alter: 75-79',\n  'Alter: 80-84',\n  'Alter: 85-89',\n  'Alter: 90-94',\n  'Alter: 95-99',\n  'Alter: 100-104',\n  'Alter: 105-109',\n  'Alter: 110-114',\n  'Staatsangehörigkeit: Deutschland',\n  'Staatsangehörigkeit: Italien',\n  'Staatsangehörigkeit: Türkei',\n  'Staatsangehörigkeit: Serbien, Montenegro, Kosovo',\n  'Staatsangehörigkeit: Spanien',\n  'Staatsangehörigkeit: Portugal',\n  'Staatsangehörigkeit: Mazedonien',\n  'Staatsangehörigkeit: Vereinigtes Königreich',\n  'Staatsangehörigkeit: Frankreich',\n  'Staatsangehörigkeit: Indien',\n  'Staatsangehörigkeit: Vereinigte Staaten von Amerika',\n  'Staatsangehörigkeit: Österreich',\n  'Staatsangehörigkeit: Kroatien',\n  'Staatsangehörigkeit: Sri Lanka',\n  'Staatsangehörigkeit: Polen',\n  'Staatsangehörigkeit: Übriges Ausland',\n  'Religion: Keine Zugehörigkeit',\n  'Religion: Protestantisch',\n  'Religion: Römisch-katolisch',\n  'Religion: Christ-katolisch',\n  'Religion: Ostkirchliche Religionsgemeinde',\n  'Religion: Jüdisch',\n  'Religion: Muslimisch',\n  'Religion: Andere',\n  'Religion: Keine Angabe',\n  'Vollzeitäquivalente',\n  'Sozialhilfequote',\n  'Geld: Veranlagungen',\n  'Geld: Reineinkommen Mittelwert',\n  'Geld: Reineinkommen Median',\n  'Geld: Reineinkommen Gini',\n  'Geld: Einkommensteuer Mittelwert',\n  'Geld: Einkommensteuer Median',\n  'Geld: Einkommensteuer Summe',\n  'Geld: Steuerbelastung des Reineinkommens',\n  'Geld: Reinvermögen Mittelwert',\n  'Geld: Reinvermögen Median',\n  'Geld: Reinvermögen Gini',\n  'Geld: Vermögenssteuer Mittelwert',\n  'Geld: Vermögenssteuer Median',\n  'Geld: Vermögenssteuer Summe',\n  'Geld: Steuerbelastung des Reinvermögens',\n]\n\nexport const AGE_GROUPS_PREFIX = 'Alter: '\n\nexport const AGE_GROUPS = MEASUREMENTS\n  .filter((d) => d.indexOf(AGE_GROUPS_PREFIX) == 0)\n  .map((d) => d.replace(AGE_GROUPS_PREFIX, ''))\n\nexport const AGE_GROUPS_REDUCTION = {\n  '0-4': '0-9',\n  '5-9': '0-9',\n  '10-14': '10-19',\n  '15-19': '10-19',\n  '20-24': '20-29',\n  '25-29': '20-29',\n  '30-34': '30-39',\n  '35-39': '30-39',\n  '40-44': '40-49',\n  '45-49': '40-49',\n  '50-54': '50-59',\n  '55-59': '50-59',\n  '60-64': '60-69',\n  '65-69': '60-69',\n  '70-74': '70-99',\n  '75-79': '70-99',\n  '80-84': '70-99',\n  '85-89': '70-99',\n  '90-94': '90-114',\n  '95-99': '90-114',\n  '100-104': '90-114',\n  '105-109': '90-114',\n  '110-114': '90-114',\n}\n\nexport const AGE_GROUPS_REDUCED = _.uniq(_.values(AGE_GROUPS_REDUCTION))\n\nexport const AGE_GROUPS_DEFAULT_SORT = '0-9'\n\nexport const CITIZENSHIPS_PREFIX = 'Staatsangehörigkeit: '\n\nexport const CITIZENSHIPS_OTHERS = 'Übriges Ausland'\n\nexport const CITIZENSHIPS_REDUCED = [\n  'Kroatien', 'Sri Lanka', 'Polen',\n]\n\nexport const CITIZENSHIPS = MEASUREMENTS\n  .filter((d) => d.indexOf(CITIZENSHIPS_PREFIX) == 0)\n  .map((d) => d.replace(CITIZENSHIPS_PREFIX, ''))\n\nexport const CITIZENSHIPS_NONREDUCED = _.difference(CITIZENSHIPS, CITIZENSHIPS_REDUCED)\n\nexport const RELIGIONS_PREFIX = 'Religion: '\n\nexport const RELIGIONS = MEASUREMENTS\n  .filter((d) => d.indexOf(RELIGIONS_PREFIX) == 0)\n  .map((d) => d.replace(RELIGIONS_PREFIX, ''))\n\nexport const RELIGIONS_DEFAULT_SORT = 'Keine Zugehörigkeit'\n\nexport const SETTINGS = {\n  csvPath: '/data/',\n}\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport * as _ from 'lodash'\nimport * as util from '../util'\n\n\nVue.component('bar-chart', {\n  delimiters: ['${', '}'],\n  template: '#component-template--bar-chart',\n  props: [\n    'allData', 'getGraphData', 'xLabel', 'yLabel', 'colors', 'xTickFormat', 'yTickFormat'\n  ],\n  data: function() {\n    return {\n    }\n  },\n\n  mounted() {\n    const elSvg = this.$el.querySelector('svg')\n    const elSvgDims = elSvg.getBoundingClientRect()\n    const svg = d3.select(elSvg)\n    const margins = {\n      top: 20,\n      right: 25,\n      bottom: 80,\n      left: 70,\n    }\n\n    this.width = elSvgDims.width - margins.left - margins.right\n    this.height = elSvgDims.height - margins.top - margins.bottom\n\n    this.g = svg\n      .append('g')\n      .attr('transform', `translate(${margins.left}, ${margins.right})`)\n\n    this.x = d3.scaleBand().rangeRound([0, this.width]).padding(0.1)\n    this.y = d3.scaleLinear().rangeRound([this.height, 0])\n    this.color = d3.scaleLinear().range(this.colors).interpolate(d3.interpolateHsl)\n\n    this.graphData = []\n\n    this.makeGraphData()\n    this.draw()\n  },\n\n  methods: {\n    makeGraphData() {\n      // NOTE: It is very important that data is sorted, for colors to work.\n      this.graphData = _.sortBy(this.getGraphData(), (d) => d.value)\n      this.updateAxes()\n    },\n\n    updateAxes() {\n      let graphDataValues = this.graphData.map((d) => d.value)\n      this.x.domain(this.graphData.map((d) => d.district))\n      this.y.domain([0, d3.max(graphDataValues)])\n      this.color.domain(util.sampleEvenly(graphDataValues, this.colors.length))\n    },\n\n    draw() {\n      let bottomAxis = d3.axisBottom(this.x)\n\n      if (this.xTickFormat) {\n        bottomAxis = bottomAxis.tickFormat(this.xTickFormat)\n      }\n\n      this.g.selectAll('.axis.axis--x').remove()\n      let xAxis = this.g\n        .append('g')\n        .attr('class', 'axis axis--x')\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(bottomAxis)\n      xAxis\n        .selectAll('text')\n        .attr('transform', 'rotate(30)')\n        .attr('text-anchor', 'start')\n      xAxis\n        .append('text')\n        .attr('transform', `translate(${this.width}) rotate(90)`)\n        .attr('dy', '-0.8rem')\n        .attr('text-anchor', 'end')\n        .text(this.xLabel)\n\n      let leftAxis = d3.axisLeft(this.y).ticks(10)\n      if (this.yTickFormat) {\n        leftAxis = leftAxis.tickFormat(this.yTickFormat)\n      }\n\n      this.g.selectAll('.axis.axis--y').remove()\n      this.g\n        .append('g')\n        .attr('class', 'axis axis--y')\n        .call(leftAxis)\n        .append('text')\n        .attr('transform', 'rotate(90)')\n        .attr('dx', '3rem')\n        .attr('dy', '-0.6rem')\n        .attr('text-anchor', 'end')\n        .text(this.yLabel)\n\n      let bars = this.g\n        .selectAll('.bar')\n        .data(this.graphData)\n\n      bars.exit().remove()\n\n      bars\n        .enter()\n        .append('rect')\n        .attr('class', 'bar')\n        .attr('x', (d) => this.x(d.district))\n        .attr('y', (d) => this.y(d.value))\n        .attr('width', this.x.bandwidth())\n        .attr('height', (d) => this.height - this.y(d.value))\n        .attr('fill', (d) => this.color(d.value))\n    },\n  },\n})\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport HeroScene from '../hero-scene'\n\n\nVue.component('hero', {\n  delimiters: ['${', '}'],\n  template: '#component-template--hero',\n  props: ['locale'],\n  data: function() {\n    return {\n    }\n  },\n\n  mounted() {\n    let hero = new HeroScene({\n      selContainer: '#hero-scene',\n    })\n  },\n\n  methods: {\n  },\n})\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport * as _ from 'lodash'\nimport {DISTRICTS, DISTRICT_NAMES} from '../common'\nimport * as util from '../util'\n\n\nVue.component('map-chart', {\n  delimiters: ['${', '}'],\n  template: '#component-template--map-chart',\n  props: [\n    'allData', 'getGraphData', 'colors',\n  ],\n  data: function() {\n    return {\n    }\n  },\n\n  mounted() {\n    this.svg = d3.select(Dom(this.$el).find('svg').elem())\n    this.color = d3.scaleLinear().range(this.colors).interpolate(d3.interpolateHsl)\n    this.makeGraphData()\n    this.draw()\n  },\n\n  methods: {\n    makeGraphData() {\n      this.graphData = _.sortBy(this.getGraphData(), (d) => d.value)\n      this.updateAxes()\n    },\n\n    updateAxes() {\n      let graphDataValues = this.graphData.map((d) => d.value)\n      this.color.domain(util.sampleEvenly(graphDataValues, this.colors.length))\n    },\n\n    draw() {\n      let makeKey = function(d) {\n        if (d) {\n          return d.district\n        } else {\n          return this.getAttribute('data-name')\n        }\n      }\n      this.svg\n        .selectAll('[data-name=\"wohnviertel\"] polygon')\n        .data(this.graphData, makeKey)\n        .attr('fill', (d) => this.color(d.value))\n    }\n  },\n})\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport * as data from '../data'\nimport {DISTRICT_NAMES} from '../common'\nimport * as dataGetters from '../data-getters'\nimport * as colors from '../colors'\n\nVue.component('page', {\n  delimiters: ['${', '}'],\n  template: '#component-template--page',\n  data: function() {\n    return {\n      allData: null,\n      colors: colors,\n      foreignersChart: {\n        getData: null,\n      },\n      welfareChart: {\n        getData: null,\n      },\n      medianWealthChart: {\n        getData: null,\n        xTickFormat: (d) => DISTRICT_NAMES[d],\n        yTickFormat: (d) => d3.format(',.0s')(d) + ' CHF',\n      },\n      averageWealthChart: {\n        getData: null,\n        xTickFormat: (d) => DISTRICT_NAMES[d],\n        yTickFormat: (d) => d3.format(',.0s')(d) + ' CHF',\n      },\n      medianIncomeChart: {\n        getData: null,\n        xTickFormat: (d) => DISTRICT_NAMES[d],\n        yTickFormat: (d) => d3.format(',.0s')(d) + ' CHF',\n      },\n      averageIncomeChart: {\n        getData: null,\n        xTickFormat: (d) => DISTRICT_NAMES[d],\n        yTickFormat: (d) => d3.format(',.0s')(d) + ' CHF',\n      },\n      citizenshipChart: {\n        getData: null,\n        getKeys: dataGetters.getCitizenshipKeys,\n        colors: colors.GRAPHIQ3_12_LOWER.concat(['#cccccc']),\n      },\n      religionChart: {\n        getData: null,\n        getKeys: dataGetters.getReligionKeys,\n        defaultSort: dataGetters.getReligionDefaultSort(),\n        colors: [\n          colors.GRAPHIQ3_12_LOWER[0],\n          colors.GRAPHIQ3_12_LOWER[2],\n          colors.GRAPHIQ3_12_LOWER[3],\n          colors.GRAPHIQ3_12_LOWER[5],\n          colors.GRAPHIQ3_12_LOWER[7],\n          colors.GRAPHIQ3_12_LOWER[9],\n          colors.GRAPHIQ3_12_LOWER[11],\n          '#aaaaaa',\n          '#cccccc',\n        ],\n      },\n      ageChart: {\n        getData: null,\n        getKeys: dataGetters.getAgeKeys,\n        defaultSort: dataGetters.getAgeDefaultSort(),\n        colors: colors.GRAPHIQ3_12_LOWER.concat(['#cccccc'])\n      },\n    }\n  },\n\n  mounted() {\n    data.getData((err, allData) => {\n      this.allData = allData\n      this.foreignersChart.getData = dataGetters.getForeignerData(allData)\n      this.welfareChart.getData = dataGetters.getWelfareData(allData)\n      this.medianWealthChart.getData = dataGetters.getMedianWealthData(allData)\n      this.averageWealthChart.getData = dataGetters.getAverageWealthData(allData)\n      this.medianIncomeChart.getData = dataGetters.getMedianIncomeData(allData)\n      this.averageIncomeChart.getData = dataGetters.getAverageIncomeData(allData)\n      this.citizenshipChart.getData = dataGetters.getCitizenshipData(allData)\n      this.religionChart.getData = dataGetters.getReligionData(allData)\n      this.ageChart.getData = dataGetters.getAgeData(allData)\n    })\n  },\n\n  methods: {\n  },\n})\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport * as _ from 'lodash'\nimport {DISTRICTS, DISTRICT_NAMES} from '../common'\nimport * as util from '../util'\n\n\nVue.component('range-chart', {\n  delimiters: ['${', '}'],\n  template: '#component-template--range-chart',\n  props: [\n    'allData', 'getGraphData', 'xLabel', 'colors', 'isPercent', 'tickFormat'\n  ],\n  data: function() {\n    return {\n    }\n  },\n\n  mounted() {\n    const elSvg = this.$el.querySelector('svg')\n    const elSvgDims = elSvg.getBoundingClientRect()\n    const svg = d3.select(elSvg)\n    const margins = {\n      top: 0,\n      right: 5,\n      bottom: 30,\n      left: 5,\n    }\n\n    this.width = elSvgDims.width - margins.left - margins.right\n    this.height = elSvgDims.height - margins.top - margins.bottom\n\n    this.g = svg\n      .append('g')\n      .attr('transform', `translate(${margins.left}, ${margins.right})`)\n\n    this.x = d3.scaleLinear().range([0, this.width])\n    this.color = d3.scaleLinear().range(this.colors).interpolate(d3.interpolateHsl)\n\n    this.graphData = []\n\n    this.makeGraphData()\n    this.draw()\n  },\n\n  methods: {\n    makeGraphData() {\n      // NOTE: It is very important that data is sorted, for `fixCollisions()`\n      // and colors to work.\n      this.graphData = _.sortBy(this.getGraphData(), (d) => d.value)\n      this.updateAxes()\n    },\n\n    updateAxes() {\n      let graphDataValues = this.graphData.map((d) => d.value)\n      const PADDING_FACTOR = 10\n      const PADDING_MIN_FACTOR = 0.5\n      const PADDING_MAX_FACTOR = 1.5\n      const min = d3.min(graphDataValues)\n      const max = d3.max(graphDataValues)\n      const padding = (max - min) / PADDING_FACTOR\n      this.x.domain([\n        min - (padding * PADDING_MIN_FACTOR),\n        max + (padding * PADDING_MAX_FACTOR),\n      ])\n      this.color.domain(util.sampleEvenly(graphDataValues, this.colors.length))\n    },\n\n    fixCollisions(nodes) {\n      const NR_ITERATIONS = 200\n      const MIN_DIST = 22 // px\n      const FORCE_FACTOR = 10\n      const FORCE = MIN_DIST / FORCE_FACTOR\n      function doFixCollisions(d) {\n        let curr = d3.select(this)\n        let prev = d3.select(this.previousElementSibling)\n        if (!prev.empty() && prev.classed('range-node')) {\n          if (Math.abs(prev.attr('x') - curr.attr('x')) < MIN_DIST) {\n            prev.attr('x', prev.attr('x') - FORCE)\n          }\n        }\n      }\n      _.times(NR_ITERATIONS, () => {\n        nodes.each(doFixCollisions)\n      })\n    },\n\n    draw() {\n      this.g.selectAll('.axis.axis--x').remove()\n\n      let bottomAxis = d3.axisBottom(this.x)\n        .ticks(10, this.isPercent ? '%' : undefined)\n\n      if (this.tickFormat) {\n        bottomAxis = bottomAxis.tickFormat(this.tickFormat)\n      }\n\n      this.g\n        .append('g')\n        .attr('class', 'axis axis--x')\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(bottomAxis)\n        .append('text')\n        .attr('x', this.width)\n        .attr('dy', '-0.6rem')\n        .attr('text-anchor', 'end')\n        .text(this.xLabel)\n\n      let nodes = this.g\n        .selectAll('.range-node')\n        .data(this.graphData)\n\n      nodes.exit().remove()\n\n      nodes = nodes\n        .enter()\n        .append('svg')\n        .attr('class', 'range-node')\n        .attr('x', (d) => this.x(d.value))\n        .attr('y', this.height - 20)\n      nodes\n        .append('circle')\n        .attr('class', 'circle')\n        .attr('r', 10)\n        .attr('fill', (d) => this.color(d.value))\n      nodes\n        .append('text')\n        .text((d) => DISTRICT_NAMES[d.district])\n        .attr('dx', '1.0rem')\n        .attr('dy', '0.2rem')\n        .attr('text-anchor', 'left')\n        .attr('transform', 'rotate(-60)')\n\n      this.fixCollisions(nodes)\n    },\n  },\n})\n","import Vue from 'vue'\nimport VueResource from 'vue-resource'\nVue.use(VueResource)\nimport * as d3 from 'd3'\nimport * as _ from 'lodash'\nimport {bindContext} from '../util'\n\n\nVue.component('stack-chart', {\n  delimiters: ['${', '}'],\n  template: '#component-template--stack-chart',\n  props: [\n    'allData', 'getGraphData', 'getKeys', 'xLabel', 'yLabel', 'colors', 'defaultSort'\n  ],\n  data: function() {\n    return {\n      factoryDefaultSort: 'district',\n    }\n  },\n\n  mounted() {\n    const elSvg = this.$el.querySelector('svg')\n    const elSvgDims = elSvg.getBoundingClientRect()\n    const svg = d3.select(elSvg)\n    const margins = {\n      top: 30,\n      right: 5,\n      bottom: 40,\n      left: 130,\n      legend: 200,\n    }\n\n    this.tooltip = d3.select(this.$el.querySelector('.graph-tooltip'))\n\n    this.width = elSvgDims.width - margins.left - margins.right\n    this.height = elSvgDims.height - margins.top - margins.bottom\n    this.graphWidth = this.width - margins.legend\n\n    this.g = svg\n      .append('g')\n      .attr('transform', `translate(${margins.left}, ${margins.right})`)\n    this.graphData = []\n\n    this.x = d3.scaleLinear().rangeRound([0, this.graphWidth])\n    this.y = d3.scaleBand().rangeRound([0, this.height]).padding(0.1)\n    this.z = d3.scaleOrdinal().range(this.colors)\n\n    this.isFocused = false\n    this.sortingProperty = this.defaultSort || this.factoryDefaultSort\n    this.tooltipsEnabled = true\n\n    this.makeGraphData()\n    this.draw()\n  },\n\n  methods: {\n    makeGraphData() {\n      this.graphData = this.getGraphData()\n      this.stackKeys = this.getKeys()\n      this.updateAxes()\n    },\n\n    updateAxes() {\n      this.x.domain([0, 1])\n      this.y.domain(\n        _.sortBy(this.graphData, (d) => d[this.sortingProperty])\n          .map((d) => d.district)\n      )\n      this.z.domain(this.stackKeys)\n    },\n\n    drawAxes() {\n      this.g.selectAll('.axis.axis--x').remove()\n      let xAxis = this.g\n        .append('g')\n        .attr('class', 'axis axis--x')\n        .attr('transform', `translate(0, ${this.height})`)\n        .call(d3.axisBottom(this.x).ticks(10, '%'))\n      xAxis\n        .selectAll('text')\n        .attr('transform', 'rotate(30)')\n        .attr('text-anchor', 'start')\n      xAxis\n        .append('text')\n        .attr('transform', `translate(${this.graphWidth})`)\n        .attr('dx', '0')\n        .attr('dy', '2.2rem')\n        .attr('text-anchor', 'end')\n        .text(this.xLabel)\n\n      this.g.selectAll('.axis.axis--y').remove()\n      this.g\n        .append('g')\n        .attr('class', 'axis axis--y')\n        .call(d3.axisLeft(this.y))\n        .append('text')\n        .attr('dx', '0rem')\n        .attr('dy', '-0.8rem')\n        .attr('text-anchor', 'end')\n        .text(this.yLabel)\n    },\n\n    drawLegend() {\n      this.g.selectAll('.legend').remove()\n      let legend = this.g\n        .append('g')\n        .attr('class', 'legend')\n        .attr('text-anchor', 'end')\n        .attr('y', 0)\n        .selectAll('g')\n        .data(this.stackKeys)\n        .enter()\n        .append('g')\n        .attr('transform', (d, i) => `translate(0, ${i * 25})`)\n\n      legend\n        .append('rect')\n        .attr('x', this.width - 20)\n        .attr('width', 20)\n        .attr('height', 20)\n        .attr('fill', this.z);\n\n      legend\n        .append('text')\n        .attr('y', 10)\n        .attr('dy', '0.35rem')\n        .attr('transform', `translate(${this.width - 33}) rotate(-30)`)\n        .attr('text-anchor', 'end')\n        .text((d) => d)\n    },\n\n    getAllBars() {\n      return this.g\n        .selectAll('.bar-group')\n        .data(d3.stack().keys(this.stackKeys)(this.graphData))\n        .selectAll('.bar')\n        .data((d) => d)\n    },\n\n    getFocusedBars() {\n      return d3.selectAll('.bar-group.bar-group--focused .bar')\n    },\n\n    zeroBarX(bars) {\n      return bars\n        .transition()\n        .duration(400)\n        .attr('x', 0)\n    },\n\n    updateBarX(bars) {\n      return bars\n        .transition()\n        .duration(400)\n        .attr('x', (d) => this.x(d[0]))\n    },\n\n    updateBarY(bars) {\n      return bars\n        .transition()\n        .duration(400)\n        .attr('y', (d) => this.y(d.data.district))\n    },\n\n    hideUnfocusedBars() {\n      d3.selectAll('.bar-group:not(.bar-group--focused)')\n        .classed('bar-group--hidden', true)\n        .transition()\n        .duration(200)\n        .style('opacity', 0)\n    },\n\n    showAllBars() {\n      d3.selectAll('.bar-group')\n        .classed('bar-group--hidden', false)\n        .transition()\n        .duration(400)\n        .style('opacity', 1)\n    },\n\n    focusBar(el) {\n      this.isFocused = true\n      let barGroup = el.parentNode\n      let parentDatum = d3.select(barGroup).datum()\n      this.sortingProperty = parentDatum.key\n\n      d3.select(barGroup)\n        .classed('bar-group--focused', true)\n\n      this.hideUnfocusedBars()\n      this.updateAxes()\n      this.drawAxes()\n      this.updateBarY(this.zeroBarX(this.getFocusedBars()))\n    },\n\n    unfocusBar() {\n      this.isFocused = false\n      this.tooltipsEnabled = false\n      this.sortingProperty = this.defaultSort || this.factoryDefaultSort\n\n      d3.select('.bar-group--focused')\n        .classed('bar-group--focused', false)\n\n      this.updateAxes()\n      this.drawAxes()\n      this.updateBarX(this.updateBarY(this.getAllBars()))\n      setTimeout(() => {\n        this.tooltipsEnabled = true\n        this.showAllBars()\n      }, 800)\n    },\n\n    showTooltip(el, d) {\n      if (!this.tooltipsEnabled) {\n        return\n      }\n      let rect = el.getBoundingClientRect()\n      let barMid = (this.x(d[1]) - this.x(d[0])) / 2\n      let left = rect.left + window.scrollX + barMid\n      let top = rect.top + window.scrollY\n      let barGroup = el.parentNode\n      let parentDatum = d3.select(barGroup).datum()\n      if (this.isFocused && !(d3.select(barGroup).classed('bar-group--focused'))) {\n        return\n      }\n      this.tooltip\n        .transition()\n        .duration(200)\n        .style('opacity', 1)\n      this.tooltip\n        .html(parentDatum.key + ', ' + (d.data[parentDatum.key] * 100).toFixed(2) + '%')\n        .style('left', left + 'px')\n        .style('top', top + 'px')\n      d3.select(el).classed('active', true)\n    },\n\n    hideTooltip(el, d) {\n      this.tooltip\n        .transition()\n        .duration(200)\n        .style('opacity', 0)\n      d3.select(el).classed('active', false)\n    },\n\n    toggleFocus(el, d) {\n      if (this.isFocused) {\n        this.unfocusBar(el)\n      } else {\n        this.focusBar(el)\n      }\n    },\n\n    drawBars() {\n      let barGroups = this.g\n        .selectAll('.bar-group')\n        .data(d3.stack().keys(this.stackKeys)(this.graphData))\n\n      barGroups.exit().remove()\n\n      barGroups = barGroups\n        .enter()\n        .append('g')\n        .attr('fill', (d) => this.z(d.key))\n        .attr('class', 'bar-group')\n\n      barGroups\n        .selectAll('.bar')\n        .data((d) => d)\n        .enter()\n        .append('rect')\n        .attr('class', 'bar')\n        .attr('x', (d) => this.x(d[0]))\n        .attr('y', (d) => this.y(d.data.district))\n        .attr('height', this.y.bandwidth())\n        .attr('width', (d) => this.x(d[1]) - this.x(d[0]))\n        .on('mouseover', bindContext(this, this.showTooltip))\n        .on('mouseout', bindContext(this, this.hideTooltip))\n        .on('click', bindContext(this, this.toggleFocus))\n    },\n\n    draw() {\n      this.drawBars()\n      this.drawAxes()\n      this.drawLegend()\n    },\n  },\n})\n","import {\n  DISTRICTS, DISTRICT_NAMES,\n  CITIZENSHIPS, CITIZENSHIPS_PREFIX, CITIZENSHIPS_OTHERS,\n  CITIZENSHIPS_REDUCED, CITIZENSHIPS_NONREDUCED,\n  RELIGIONS, RELIGIONS_PREFIX, RELIGIONS_DEFAULT_SORT,\n  AGE_GROUPS, AGE_GROUPS_PREFIX,\n  AGE_GROUPS_REDUCTION, AGE_GROUPS_REDUCED, AGE_GROUPS_DEFAULT_SORT,\n} from './common'\nimport * as _ from 'lodash'\n\nexport function getCitizenshipData(allData) {\n  return function() {\n    let year = '2016'\n    const getKey = (item) => CITIZENSHIPS_PREFIX + item\n\n    return DISTRICTS.map((district) => {\n      let total = CITIZENSHIPS.reduce((total, citizenship) => {\n        return total + allData[district][getKey(citizenship)][year]\n      }, 0)\n\n      let districtData = CITIZENSHIPS.reduce((districtData, citizenship) => {\n        if (CITIZENSHIPS_REDUCED.includes(citizenship)) {\n          return districtData\n        }\n\n        let rawDatum = allData[district][getKey(citizenship)][year]\n        let proportionalDatum = rawDatum / total\n        districtData[citizenship] = proportionalDatum\n\n        if (citizenship == CITIZENSHIPS_OTHERS) {\n          districtData[citizenship] += CITIZENSHIPS_REDUCED.reduce(\n            (sum, redCitizenship) => {\n              return sum + allData[district][getKey(redCitizenship)][year] / total\n            }, 0\n          )\n        }\n\n        return districtData\n      }, {})\n\n      districtData.total = total\n      districtData.district = DISTRICT_NAMES[district]\n\n      return districtData\n    })\n  }\n}\n\nexport function getCitizenshipKeys() {\n  return CITIZENSHIPS_NONREDUCED\n}\n\nexport function getReligionData(allData) {\n  return function() {\n    let year = '2013'\n    const getKey = (item) => RELIGIONS_PREFIX + item\n\n    return DISTRICTS.map((district) => {\n      let total = RELIGIONS.reduce((total, religion) => {\n        return total + allData[district][getKey(religion)][year]\n      }, 0)\n\n      let districtData = RELIGIONS.reduce((districtData, religion) => {\n        let rawDatum = allData[district][getKey(religion)][year]\n        let proportionalDatum = rawDatum / total\n        districtData[religion] = proportionalDatum\n        return districtData\n      }, {})\n\n      districtData.total = total\n      districtData.district = DISTRICT_NAMES[district]\n\n      return districtData\n    })\n  }\n}\n\nexport function getReligionKeys() {\n  return RELIGIONS\n}\n\nexport function getReligionDefaultSort() {\n  return RELIGIONS_DEFAULT_SORT\n}\n\nexport function getAgeData(allData) {\n  return function() {\n    const year = '2016'\n    const getKey = (item) => AGE_GROUPS_PREFIX + item\n\n    return DISTRICTS.map((district) => {\n      let total = AGE_GROUPS.reduce((total, ageGroup) => {\n        return total + allData[district][getKey(ageGroup)][year]\n      }, 0)\n\n      let districtData = AGE_GROUPS.reduce((districtData, ageGroup) => {\n        let rawDatum = allData[district][getKey(ageGroup)][year]\n        let proportionalDatum = rawDatum / total\n        let reducedKey = AGE_GROUPS_REDUCTION[ageGroup]\n        districtData[reducedKey] = districtData[reducedKey] || 0\n        districtData[reducedKey] += proportionalDatum\n        return districtData\n      }, {})\n\n      districtData.total = total\n      districtData.district = DISTRICT_NAMES[district]\n\n      return districtData\n    })\n  }\n}\n\nexport function getAgeKeys() {\n  return AGE_GROUPS_REDUCED\n}\n\nexport function getAgeDefaultSort() {\n  return AGE_GROUPS_DEFAULT_SORT\n}\n\nexport function getForeignerData(allData) {\n  return function() {\n    const year = '2016'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value:\n        this.allData[district]['Bevölkerung: Ausländer'][year] / (\n          this.allData[district]['Bevölkerung: Ausländer'][year] +\n          this.allData[district]['Bevölkerung: Schweizer'][year]\n        ),\n    }))\n    return graphData\n  }\n}\n\nexport function getWelfareData(allData) {\n  return function() {\n    const year = '2016'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value: this.allData[district]['Sozialhilfequote'][year] / 100\n    }))\n    return graphData\n  }\n}\n\nexport function getMedianWealthData(allData) {\n  return function() {\n    const year = '2014'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value: this.allData[district]['Geld: Reinvermögen Median'][year]\n    }))\n    return graphData\n  }\n}\n\nexport function getAverageWealthData(allData) {\n  return function() {\n    const year = '2014'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value: this.allData[district]['Geld: Reinvermögen Mittelwert'][year]\n    }))\n    return graphData\n  }\n}\n\nexport function getMedianIncomeData(allData) {\n  return function() {\n    const year = '2014'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value: this.allData[district]['Geld: Reineinkommen Median'][year]\n    }))\n    return graphData\n  }\n}\n\nexport function getAverageIncomeData(allData) {\n  return function() {\n    const year = '2014'\n    let graphData = DISTRICTS.map((district) => ({\n      district: district,\n      value: this.allData[district]['Geld: Reineinkommen Mittelwert'][year]\n    }))\n    return graphData\n  }\n}\n","import {DISTRICTS, SETTINGS} from './common'\nimport async from 'async'\nimport * as d3 from 'd3'\n\n\nfunction transformDistrictData(districtData) {\n  return districtData.reduce((newData, datum) => {\n    newData[datum['Name']] = datum\n    return newData\n  }, {})\n}\n\n\nfunction transformRow(row) {\n  const numberKeys = [\n    '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008',\n    '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017',\n  ]\n  numberKeys.forEach((key) => {\n    if (row[key].length == 0 || row[key] == '-') {\n      row[key] = null\n    } else {\n      row[key] = +row[key]\n    }\n  })\n  return row\n}\n\n\nfunction getDistrict(allData, district, done) {\n  // TODO: Fix hack.\n  d3.csv(SETTINGS.csvPath + district + '.csv', transformRow, (districtData) => {\n    allData[district] = transformDistrictData(districtData)\n    done(null, allData)\n  })\n}\n\n\nexport function getData(done) {\n  async.reduce(DISTRICTS, {}, getDistrict, done)\n}\n","import * as THREE from 'three'\nimport * as _ from 'lodash'\nimport {bindContext} from './util'\nimport * as colors from './colors'\n\n\nexport default class HeroScene {\n  constructor({selContainer}) {\n    this.elContainer = document.querySelector(selContainer)\n\n    this.objectSize = 10\n    this.objectDepth = 200\n    this.objectDefaultZ = 0 - (this.objectDepth / 2)\n    this.objectCountX = 21\n    this.objectCountY = 20\n    this.objectSpeed = 0.03\n    this.objectDirectionChangeChance = 0\n    this.objectMinZ = this.objectDefaultZ\n    this.objectZDiff = 4\n    this.objectMaxZ = this.objectMinZ + this.objectZDiff\n    this.mouseRotationDampenX = 70000\n    this.mouseRotationDampenY = 20000\n    this.cameraRotXTarget = 0\n    this.cameraRotYTarget = 0\n    this.cameraRotXSpeed = 0.1\n    this.cameraRotYSpeed = 0.1\n\n    this.updateDimensions()\n\n    this.scene = this.makeScene()\n    this.camera = this.makeCamera()\n    this.renderer = this.makeRenderer()\n    this.makeObjects()\n    this.lights = this.makeLights()\n\n    Dom(window).bind('resize', () => this.updateAndEnactDimensions())\n    Dom(this.elContainer).bind('mousemove', this.reactToMouse.bind(this))\n\n    this.enactDimensions()\n    this.render()\n  }\n\n  reactToMouse(event) {\n    const mouseXOnMove = event.clientX - (this.width / 2)\n    this.cameraRotYTarget = -mouseXOnMove / this.mouseRotationDampenX\n\n    const mouseYOnMove = event.clientY - (this.height / 2)\n    this.cameraRotXTarget = -mouseYOnMove / this.mouseRotationDampenY\n  }\n\n  updateCameraRotation() {\n    this.camera.rotation.x += (this.cameraRotXTarget - this.camera.rotation.x) * this.cameraRotXSpeed\n    this.camera.rotation.y += (this.cameraRotYTarget - this.camera.rotation.y) * this.cameraRotYSpeed\n  }\n\n  randomizeObjectDirections() {\n    this.objectDirections = this.objectDirections.map((direction, index) => {\n      let object = this.objects[index]\n      let isObjectTooHigh = object.position.z > this.objectMaxZ\n      let isObjectTooLow = object.position.z < this.objectMinZ\n      let wasRollSuccessful = Math.random() < this.objectDirectionChangeChance\n      if (isObjectTooHigh || isObjectTooLow || wasRollSuccessful) {\n        return direction * -1\n      } else {\n        return direction\n      }\n    })\n  }\n\n  updateObjectPositions() {\n    this.objects.forEach((object, index) => {\n      let change = this.objectSpeed * this.objectDirections[index]\n      object.position.z += change\n    })\n  }\n\n  animate() {\n    this.randomizeObjectDirections()\n    this.updateObjectPositions()\n    this.updateCameraRotation()\n  }\n\n  render() {\n    this.animate()\n    this.renderer.render(this.scene, this.camera)\n    requestAnimationFrame(() => this.render())\n  }\n\n  makeScene() {\n    let scene = new THREE.Scene()\n    return scene\n  }\n\n  makeCamera() {\n    // Depends on dimensions\n    let camera = new THREE.PerspectiveCamera(this.cameraFov, this.aspectRatio, 0.1, 1000)\n    camera.up = new THREE.Vector3(0, 1, 0)\n    camera.rotation.x = this.cameraAngle\n    camera.position.x = -(this.objectSize / 2)\n    camera.position.z = this.cameraZ\n    return camera\n  }\n\n  makeRenderer() {\n    // Depends on dimensions\n    let renderer = new THREE.WebGLRenderer({\n      antialiasing: true,\n      alpha: true,\n    })\n    // renderer.shadowMap.enabled = true\n    // renderer.shadowMap.soft = true\n    // renderer.shadowMap.type = THREE.PCFSoftShadowMap\n    renderer.setSize(this.width, this.height)\n    this.elContainer.appendChild(renderer.domElement)\n    return renderer\n  }\n\n  makeObjectGeometry({width, height, depth}) {\n    return new THREE.CubeGeometry(width, height, depth)\n  }\n\n  makeObject(x, y) {\n    let colorSet = colors.GRAPHIQ3_12_HIGHS\n    let colorIndex = 2\n    let colorCode = colorSet[colorIndex]\n    let color = parseInt(colorCode.slice(1), 16)\n\n    let material = new THREE.MeshLambertMaterial({color: color})\n\n    let geometry = this.makeObjectGeometry({\n      width: this.objectSize,\n      height: this.objectSize,\n      depth: this.objectDepth,\n    })\n\n    let mesh = new THREE.Mesh(geometry, material)\n    // mesh.castShadow = true\n    // mesh.receiveShadow = true\n\n    let objectZ = this.objectDefaultZ + (_.random(0, this.objectZDiff * 10) / 10)\n    mesh.position.set(x, y, objectZ)\n\n    this.scene.add(mesh)\n\n    return mesh\n  }\n\n  makeObjects() {\n    const xRange = _.range(0 - this.objectCountX, this.objectCountX)\n    const yRange = _.range(0 - this.objectCountY, this.objectCountY)\n    let objects = xRange.reduce((xObjects, xIndex) => {\n      let yObjects = yRange.reduce((yObjects, yIndex) => {\n        let object = this.makeObject(\n          this.objectSize * xIndex,\n          this.objectSize * yIndex,\n        )\n        return yObjects.concat([object])\n      }, [])\n      return xObjects.concat(yObjects)\n    }, [])\n\n    this.objects = objects\n    this.objectDirections = this.objects.map(() => [-1, 1][_.random(0, 1)])\n  }\n\n  setLightShadow(light) {\n    light.castShadow = true\n    light.shadow.mapSize.width = 8000\n    light.shadow.mapSize.height = 8000\n    light.shadow.camera.left = -200\n    light.shadow.camera.right = 200\n    light.shadow.camera.top = 200\n    light.shadow.camera.bottom = -200\n    light.shadow.camera.far = 2000\n  }\n\n  makeLights() {\n    let ambientLight = new THREE.AmbientLight(0xffffff, 1.0)\n    this.scene.add(ambientLight)\n\n    let dirLight = new THREE.DirectionalLight(0xffffff, 0.15)\n    dirLight.position.set(200, 150, 80)\n    // this.setLightShadow(dirLight)\n    this.scene.add(dirLight)\n\n    let spotLight = new THREE.SpotLight(0xffffff, 0.2)\n    spotLight.position.set(100, 100, 150)\n    this.scene.add(spotLight)\n  }\n\n  updateDimensions() {\n    this.width = this.elContainer.offsetWidth\n    this.height = this.elContainer.offsetHeight\n    this.aspectRatio = this.width / this.height\n    this.cameraFov = 80\n    this.cameraZ = 80\n    this.cameraAngle = 0 * Math.PI / 180\n  }\n\n  enactDimensions() {\n    this.camera.aspect = this.aspectRatio\n    this.camera.fov = this.cameraFov\n    this.camera.rotation.x = this.cameraAngle\n    this.camera.position.z = this.cameraZ\n    this.camera.updateProjectionMatrix()\n    this.renderer.setSize(this.width, this.height)\n  }\n\n  updateAndEnactDimensions() {\n    this.updateDimensions()\n    this.enactDimensions()\n  }\n}\n","export function bindContext(ctx, fn) {\n  /*\n  For a context `ctx` and a function `fn`, returns a function `fn0`, that:\n  - When called with [a, b, ...], will call `fn` with [this, a, b, ...]\n  - Will have `ctx` as the context (`this`)\n\n  Basically, you can do this:\n\n  Dom(el).bind('click', bindContext(this, this.doSomething()))\n\n  Which will call this.doSomething() with the proper context (`this`), while\n  the context coming from the handler will be used as the first argument.\n  This means that you can use `this` normally, while the stuff you need e.g.\n  from the event handler will be passed as the first argument, with the rest\n  of the arguments following.\n  */\n  return function() {\n    fn.apply(ctx, [].concat([this]).concat([].slice.call(arguments)))\n  }\n}\n\n\nexport function sampleEvenly(data, count) {\n  /*\n  From ICGenealogy:\n  Evenly sample `count` elements from the `data`. The first element is chosen\n  first, then the last element, then the middle portion is considered,\n  splitting it recursively into half and choosing the middle element when\n  the length is odd until the requested number of elements is chosen.\n  */\n  function sample(data, count) {\n    /*\n    Repeatedly split a list, choosing the middle element if the length is\n    odd. Return the chosen element (if any), surrounded on the left and\n    right by the elements chosen by the respective recursive calls. Return\n    an empty list if there are no more elements to pick.\n    */\n    if (count <= 0) {\n      return []\n    }\n    let chosen = []\n    let rightHalfOffset = 0\n\n    // If the list's length is odd, choose the middle element before\n    // splitting the list in two.\n    let iMid = Math.floor(data.length / 2)\n    if (data.length % 2 != 0) {\n      rightHalfOffset = 1\n      chosen.push(data[iMid])\n      count--\n    }\n\n    // Split the list into two parts, skipping the middle element if the\n    // list's length is odd.\n    let leftHalf = data.slice(0, iMid)\n    let rightHalf = data.slice(iMid + rightHalfOffset, data.length)\n\n    // Recursively sample these two parts, splitting the count into two.\n    // If the count is not divisible by two, give the remainder to the\n    // right half.\n    let chosenLeft = sample(leftHalf, Math.floor(count / 2))\n    let chosenRight = sample(rightHalf, Math.ceil(count / 2))\n\n    return [].concat(chosenLeft, chosen, chosenRight)\n  }\n\n  if (count <= 0) {\n    return []\n  }\n  if (count == 1) {\n    return data[0]\n  }\n  if (data.length <= count) {\n    return data\n  }\n\n  let firstElement = data[0]\n  let lastElement = data[data.length - 1]\n  let middlePortion = data.slice(1, data.length - 1)\n  let middleElements = sample(middlePortion, count - 2)\n\n  return [].concat([firstElement], middleElements, [lastElement])\n}\n"]}